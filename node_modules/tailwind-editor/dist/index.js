!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TailwindEditor=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,n,l,s){return e[1]&&s?t(l.ctx.slice(),e[1](s(n))):l.ctx}function a(t){return t&&r(t.destroy)?t.destroy:e}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function g(e){return document.createTextNode(e)}function m(){return g(" ")}function x(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function $(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function k(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}e.selectedIndex=-1}function y(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let _;function C(e){_=e}function N(){if(!_)throw new Error("Function called outside component initialization");return _}function M(){const e=N();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,l,t),s}(t,n,{cancelable:l});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}function H(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const L=[],E=[],T=[],I=[],A=Promise.resolve();let B=!1;function V(){B||(B=!0,A.then(O))}function D(){return V(),A}function z(e){T.push(e)}function R(e){I.push(e)}const j=new Set;let S=0;function O(){const e=_;do{for(;S<L.length;){const e=L[S];S++,C(e),Z(e.$$)}for(C(null),L.length=0,S=0;E.length;)E.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];j.has(t)||(j.add(t),t())}T.length=0}while(L.length);for(;I.length;)I.pop()();B=!1,j.clear(),C(e)}function Z(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(z)}}const P=new Set;let G;function W(){G={r:0,c:[],p:G}}function X(){G.r||s(G.c),G=G.p}function U(e,t){e&&e.i&&(P.delete(e),e.i(t))}function F(e,t,n,l){if(e&&e.o){if(P.has(e))return;P.add(e),G.c.push((()=>{P.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}function q(e,t,n,l){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,void 0===l&&n(e.$$.ctx[s]))}function K(e){e&&e.c()}function Y(e,t,l,o){const{fragment:i,after_update:a}=e.$$;i&&i.m(t,l),o||z((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),a.forEach(z)}function J(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,n,r,o,i,a,c,u=[-1]){const f=_;C(t);const p=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:i,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(p.root);let h=!1;if(p.ctx=r?r(t,n.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return p.ctx&&i(p.ctx[e],p.ctx[e]=s)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](s),h&&function(e,t){-1===e.$$.dirty[0]&&(L.push(e),V(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();n.intro&&U(t.$$.fragment),Y(t,n.target,n.anchor,n.customElement),O()}C(f)}class ee{$destroy(){J(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var te={testImgUrl:e=>new Promise((function(t){let n,l=new Image;l.onerror=l.onabort=function(){clearTimeout(n),t(!1)},l.onload=function(){clearTimeout(n),t(!0)},n=setTimeout((function(){l.src="//!!!!/noexist.jpg",t(!1)}),5e3),l.src=e})),testVideoUrl:e=>/^https?:\/\/.*\.(mp4|ogg|webm)$/i.test(e.trim()),parseYouTube(e){const t=/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i.exec(e);if(t&&t[1])return"https://www.youtube.com/embed/"+t[1]},parseVimeo(e){const t=/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i.exec(e);if(t&&t[1])return"https://player.vimeo.com/video/"+t[1]}};function ne(e){let t,n,l=e[0].replace(/<div.*Edit iframe.*?<\/div>/gs,"")+"";return{c(){t=p("div"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=e[0].replace(/<div.*Edit iframe.*?<\/div>/gs,"")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function le(t){let n;return{c(){n=p("br")},m(e,t){u(e,n,t)},p:e,d(e){e&&d(n)}}}function se(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h6"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function re(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h5"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function oe(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h4"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function ie(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h3"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function ae(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h2"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function ce(e){let t,n,l=(e[0]||"&nbsp;")+"";return{c(){t=p("h1"),b(t,"class",n="relative "+e[1]),b(t,"data-txteditor","true")},m(e,n){u(e,t,n),t.innerHTML=l},p(e,s){1&s[0]&&l!==(l=(e[0]||"&nbsp;")+"")&&(t.innerHTML=l),2&s[0]&&n!==(n="relative "+e[1])&&b(t,"class",n)},d(e){e&&d(t)}}}function ue(e){let t,n,l,r;return{c(){t=p("div"),b(t,"data-txtcustom",e[3]),b(t,"data-txteditor","true"),b(t,"spellcheck","false"),b(t,"contenteditable","true"),b(t,"class",n="outline-none focus:outline-none relative "+e[1]),void 0===e[0]&&z((()=>e[21].call(t)))},m(n,s){u(n,t,s),e[20](t),void 0!==e[0]&&(t.innerHTML=e[0]),l||(r=[a(e[14].call(null,t)),x(t,"paste",e[15]),x(t,"blur",e[18]),x(t,"mousemove",e[12]),x(t,"mouseup",$(e[19])),x(t,"input",e[21]),x(t,"keydown",e[11]),x(t,"mouseup",e[13]),x(t,"keyup",e[13])],l=!0)},p(e,l){8&l[0]&&b(t,"data-txtcustom",e[3]),2&l[0]&&n!==(n="outline-none focus:outline-none relative "+e[1])&&b(t,"class",n),1&l[0]&&e[0]!==t.innerHTML&&(t.innerHTML=e[0])},d(n){n&&d(t),e[20](null),l=!1,s(r)}}}function de(t){let n;function l(e,t){return e[2]?ue:e[10]?ce:e[9]?ae:e[8]?ie:e[7]?oe:e[6]?re:e[5]?se:e[0]?ne:le}let s=l(t),r=s(t);return{c(){r.c(),n=g("")},m(e,t){r.m(e,t),u(e,n,t)},p(e,t){s===(s=l(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},i:e,o:e,d(e){r.d(e),e&&d(n)}}}let fe="code text-sm font-mono px-8 py-6 bg-gray-100",pe="quote text-xl border-l-4 border-gray-800 px-4",he=/md:text\-(sm\stext-sm|base\stext-base|xl\stext-lg|2xl\stext-xl|3xl\stext-xl|4xl\stext-2xl|5xl\stext-3xl|6xl\stext-4xl)/,ge=/md:text\-(sm\stext-sm|base\stext-base|xl\stext-lg|2xl\stext-xl|3xl\stext-xl|4xl\stext-2xl|5xl\stext-3xl|6xl\stext-4xl)/,me=/leading\-(none|tight|snug|normal|relaxed|loose)(\smd:leading\-(none|tight|snug|normal|relaxed|loose))?/,xe=/text\-(left|right|center)/,$e=/^p[lrtb]\-/,be=/^m[lrtb]\-/,ve=/^text\-(gray|red|yellow|green|blue|indigo|purple|pink|white|black|transparent)/,we=/^bg\-(gray|red|yellow|green|blue|indigo|purple|pink|white|black|transparent)/;const ke=/font\-(thin|normal|semibold|bold|black)/,ye=/p\-([0-4])/;function _e(e){return e?.dataset?.txtcustom?"true"==e?.dataset?.txtcustom:!!e?.parentNode&&_e(e.parentNode)}function Ce(e,t,n=ke){for(let l of e)if(l.klass){let e=l.klass.split(" "),s=e.findIndex((e=>n.test(e))),r=~s?e[s]:"";r&&(l.klass=l.klass.replace(r,"").trim()),l.klass=l.klass.split(" ").concat([t]).join(" ")}else l.klass=t}function Ne(e,t,n,l){let s=n,r=l||e[t]?.txt?.length||e.length+1;if(l&&l<n&&(s=l,r=n),e[t]&&!e[t].txt)return[{txt:""},{txt:"",klass:e[t].klass,tag:e[t].tag,href:e[t].href}];let o=e[t]?.txt.slice(0,s),i=e[t]?.txt.slice(s,r),a=[],c=0;return o&&(a[c++]={txt:o,klass:e[t].klass,tag:e[t].tag,href:e[t].href}),i&&(a[c++]={txt:i,klass:e[t].klass,tag:e[t].tag,href:e[t].href}),l&&e[t]?.txt.slice(r,e[t].txt.length)&&(a[c++]={txt:e[t].txt.slice(r,e[t].txt.length),klass:e[t].klass,tag:e[t].tag,href:e[t].href}),a}function Me(e){let t=e;if(!e)return-1;if("DIV"==e.nodeName){if(t=e.children[0],!t)return-1}else["SPAN","A"].includes(e.parentNode.tagName)&&(t=e.parentNode);return[...t.parentNode.childNodes].filter((e=>"#text"!=e.nodeName||e.length>0)).indexOf(t)}function He(e,t,n){let l,s,r,o,i,a,c=M(),u=[],{html:d=""}=t,{gklass:f=""}=t,{editable:p=!0}=t,{custom:h=!1}=t;async function g(){let e=document.createElement("div");e.innerHTML=d;let t=[];for(let n of[...e.childNodes]){const e=e=>n.hasAttribute(e);"BR"==n.nodeName?t.push({tag:"BR",txt:""}):"A"==n.nodeName?t.push({tag:"A",txt:n.textContent,href:n.getAttribute("href"),blank:"_blank"==n.getAttribute("target"),klass:n.classList&&[...n.classList].join(" ")}):"IMG"==n.nodeName?t.push({tag:"IMG",txt:n.getAttribute("alt"),href:n.getAttribute("src"),klass:n.classList&&[...n.classList].join(" ")}):"VIDEO"==n.nodeName?t.push({tag:"VIDEO",href:n.getAttribute("src"),klass:n.classList&&[...n.classList].join(" "),opts:{autoplay:e("autoplay"),loop:e("loop"),muted:e("muted"),controls:e("controls")}}):n.dataset?.iframe?t.push({tag:"IFRAME",href:n.lastChild.getAttribute("src"),klass:n.lastChild.classList&&[...n.lastChild.classList].join(" ")}):"SPAN"==n.nodeName?t.push({txt:n.innerText,klass:n.classList&&[...n.classList].join(" ")}):"#text"!==n.nodeName?t.push({htxt:`${n.outerHTML}`,klass:n.classList&&[...n.classList].join(" ")}):"#text"==n.nodeName&&n.length>0&&t.push({txt:n.textContent})}u=t,await D(),k()}let m=!1;var x;x=()=>{n(16,m=!0),g(),document.onselectionchange=function(){window.__edw.cursor_change=+new Date}},N().$$.on_mount.push(x);const $=["B".charCodeAt(0),"U".charCodeAt(0),"I".charCodeAt(0)];function b(e){let t="";return e.forEach((e=>{let n=e.txt;if(e.txt&&(n=e.txt.replaceAll("<","&lt;").replaceAll(">","&gt;")),e.htxt)t+=e.htxt;else if("BR"==e.tag)t+="<br>";else if("A"==e.tag)t+=`<a href=${e.href} target=${e.blank?"_blank":"_self"} class="${e.klass}">${n}</a>`;else if("IMG"==e.tag)t+=`<img src=${e.href} class="${e.klass}" alt="${n}" />`;else if("VIDEO"==e.tag)t+=`<video src=${e.href} class="${e.klass}" ${e.opts?.loop?"loop":""} ${e.opts?.autoplay?"autoplay":""} ${e.opts?.muted?"muted":""} ${e.opts?.controls?"controls":""} />`;else if("IFRAME"==e.tag){let n="";p&&(n='<div class="p-1 text-xs w-32 bg-yellow-200 text-yellow-800 cursor-pointer underline text-center">\n\t\t\t\t\t\tEdit iframe\n\t\t\t\t\t</div>'),t+=`<div class="iframe-wrap" data-iframe="true" contenteditable="false">\n\t\t\t\t\t${n}\n\t\t\t\t\t<iframe src=${e.href} class="${e.klass}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen />\n\t\t\t\t</div>`}else e.klass?t+=`<span class="${e.klass}">${n}</span>`:t+=n})),t}function v(){n(0,d=b(u))}let w=p;function k(){_&&[..._.childNodes].forEach(((e,t)=>{(["IMG","VIDEO"].includes(e.nodeName)||e.classList?.contains("iframe-wrap"))&&e.addEventListener("click",(e=>function(e,t){let n=u[t],l={alt:n?.txt||""};"VIDEO"==e.tagName&&(l={opts:n?.opts||{}});c("set_media",{setMedia:e=>{e.src&&(V(e),"VIDEO"==e.media_type?j(e.klass,e.opts,e.src,t):"IMG"==e.media_type?R(e.klass,e.alt,e.src,t):"IFRAME"==e.media_type&&S(e.klass,e.src,t))},base_node:e,media_type:e.tagName,src:n?.href||"",klass:n?.klass||"",...l,delMedia:()=>z(t),mouseX:y})}(e.currentTarget,t)))}))}let y,_,C,L=null;async function T(e){L||(L={start_i:e.baseOffset,end_i:e.extentOffset,b_node:e.anchorNode,e_node:e.focusNode})}async function I(e,t,n={}){u.forEach((e=>delete e.selected));let l=window.__edw.getSelection();l.toString();let s=L?L.start_i:l.baseOffset,r=L?L.end_i:l.extentOffset,o=L?L.b_node:l.anchorNode,i=L?L.e_node:l.focusNode,a=Me(o),d=Me(i),f=o==i,p=a,h=d;if(a>d){p=d,h=a;let e=s;s=r,r=e}let g=o.parentNode;"DIV"!==o.parentNode.tagName&&(g=g.parentNode);let m=u.slice(p,h+1),x=Ne(m,0,s,f&&r),$=1==x.length?x:2!=x.length||0!=s&&0!=r?[x[1]]:[x[0]];m.splice(0,1,...x);let b=[];f||(b=Ne(m,m.length-1,r,!1),m.splice(m.length-1,1,...b),$=$.concat(m.slice(1,m.length-(1==b.length?0:1)))),function(e,t,n,l={}){if(ve.test(t)||we.test(t))return function(e,t){for(let n of e)if(n.klass){let e=n.klass.split(" "),l=e.findIndex((e=>t.startsWith("text")?ve.test(e):we.test(e))),s=~l?e[l]:"";s&&(n.klass=n.klass.replace(s,"").trim()),n.klass=n.klass.split(" ").concat([t]).join(" ")}else n.klass=t}(e,t),void c("changeClass");if(ke.test(t))return Ce(e,t,ke),void c("changeClass");if(ye.test(t))return Ce(e,t,ye),void c("changeClass");if(e.find((e=>!("BR"==e.tag||e.klass&&e.klass.includes(t)))))for(let s of e)"BR"!=s.tag&&n&&(s.tag="A",s.href=n,s.blank=!!l.blank),s.klass&&s.klass.includes(t)||(s.klass=s.klass?s.klass.split(" ").concat([t]).join(" "):t,s.tag=s.tag);else for(let s of e)"BR"!=s.tag&&n&&(s.tag="A",s.href=n,s.blank=!!l.blank),null===n&&"IMG"!=s.tag&&s.klass&&s.klass.includes("link")&&(delete s.href,delete s.tag),n||(s.klass=s.klass?s.klass.replace(t,"").trim():""),""==s.klass&&delete s.klass;c("changeClass")}($,e,t,n),$.forEach((e=>e.selected=!0)),u.splice(p,h-p+1,...m);let w={};!function(e){let t=[{...u[0]}];u[0].selected&&(e.s_start=0,e.a_start=0,e.s_end=u[0].txt.length,e.a_end=0);for(let n=1;n<u.length;n++)u[n].txt&&u[n].tag==u[n-1].tag&&u[n].klass==u[n-1].klass?(u[n].selected&&!u[n-1].selected&&(e.s_start=t[t.length-1].txt.length,e.a_start=t.length-1,e.s_end=t[t.length-1].txt.length+u[n].txt.length,e.a_end=t.length-1),t[t.length-1].txt+=u[n].txt):u[n].txt?(t.push({...u[n]}),u[n].selected&&!u[n-1].selected&&(e.s_start=0,e.a_start=t.length-1,e.s_end=t[t.length-1].txt.length,e.a_end=t.length-1)):"BR"==u[n].tag&&t.push({...u[n]}),u[n].selected&&u[n-1].selected&&(e.s_end=t[t.length-1].txt.length,e.a_end=t.length-1);u=t}(w),v(),L=null,await D();let k=[...g.childNodes].filter((e=>"#text"!==e.nodeName||"#text"==e.nodeName&&e.length>0)),y=k[w.a_start],_=k[w.a_end];y="#text"==y.nodeName?y:y.firstChild,_="#text"==_.nodeName?_:_.firstChild,await new Promise((e=>setTimeout(e))),window.__edw.getSelection().removeAllRanges(),window.__edw.getSelection().setBaseAndExtent(y,w.s_start,_,w.s_end),T(window.__edw.getSelection())}async function A(e){if(e)if(he.test(e))n(1,f=f.replace(fe,"").replace(pe,"").trim()),B(e,he);else if(e.startsWith("code"))f.includes(fe)||(n(1,f=f.replace(pe,"").replace(ge,"").trim()),n(1,f+=" "+fe));else if(e.startsWith("quote"))f.includes(pe)||(n(1,f=f.replace(fe,"").replace(ge,"").trim()),n(1,f+=" "+pe));else if($e.test(e)){B(e,new RegExp(`p${e[1]}-[^\\s]+`))}else if(be.test(e)){B(e,new RegExp(`m${e[1]}-[^\\s]+`))}else xe.test(e)?B(e,xe):me.test(e)?B(e,me):function(e){f.includes(e)?n(1,f=f.replace(e,"").trim()):n(1,f=f.split(" ").concat([e]).join(" "))}(e);else elm.klass=e;c("changeClass")}function B(e,t){n(1,f=f.replace(t,"").replace(/\s+/," ").trim()),n(1,f=f+" "+e)}function V(e){const t="flex items-start",l="flex justify-end items-start",s="flex justify-center items-start";n(1,f=f.replace(/flex.+start/,"")),e.klass.includes(t)&&n(1,f+=" "+t),e.klass.includes(l)&&n(1,f+=" "+l),e.klass.includes(s)&&n(1,f+=" "+s),n(1,f=f.replace(/\s+/g," ").trim())}function z(e){u.splice(e,1),v()}function R(e,t,n,l){u[l]={tag:"IMG",href:n,txt:t,klass:e},v()}function j(e,t,n,l){u[l]={tag:"VIDEO",href:n,opts:t,klass:e},v()}function S(e,t,n){u[n]={tag:"IFRAME",href:t,klass:e},v()}function O(){c("hideselect")}function Z(e){return new Promise((t=>{if(null!==e){let l=new FileReader;l.onload=function(e){const l=e.target.result,s=new Image;s.src=l,s.onload=()=>{let e=function(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t.toDataURL("image/webp")}(s);n(0,d=d.replace(l,e))},t(e.target.result)},l.readAsDataURL(e)}else t()}))}return window.__edw.addEventListener("mousemove",(function(){c("update")})),e.$$set=e=>{"html"in e&&n(0,d=e.html),"gklass"in e&&n(1,f=e.gklass),"editable"in e&&n(2,p=e.editable),"custom"in e&&n(3,h=e.custom)},e.$$.update=()=>{65537&e.$$.dirty[0]&&m&&(d?g():u=[]),4&e.$$.dirty[0]&&p&&setTimeout(k),131076&e.$$.dirty[0]&&w!=p&&(n(17,w=p),v()),2&e.$$.dirty[0]&&n(10,l=f.includes("text-6xl")),2&e.$$.dirty[0]&&n(9,s=f.includes("text-5xl")),2&e.$$.dirty[0]&&n(8,r=f.includes("text-4xl")),2&e.$$.dirty[0]&&n(7,o=f.includes("text-3xl")),2&e.$$.dirty[0]&&n(6,i=f.includes("text-2xl")),2&e.$$.dirty[0]&&n(5,a=f.includes("text-xl"))},[d,f,p,h,C,a,i,o,r,s,l,async function(e){if(e.ctrlKey&&$.includes(e.keyCode))return void e.preventDefault();if(e.ctrlKey&&e.keyCode=="Z".charCodeAt(0))return void c("back");if(e.ctrlKey&&e.keyCode=="Y".charCodeAt(0))return void c("forward");let t=window.__edw.getSelection(),n=t.toString(),l=t.anchorNode,s=t.focusNode,r=t.baseOffset;if(t.extentOffset,!l)return;let o="DIV"==l?.tagName?l:"DIV"==l.parentNode.tagName?l.parentNode:l.parentNode.parentNode,i=o;for(;!i?.dataset?.txteditor&&"HTML"!=i?.tagName;)i=i?.parentNode;let a=Me(l);if(Me(s),38==e.keyCode&&l==s&&0==r&&a<=0){let n=i.previousElementSibling;for(;n&&n.previousElementSibling&&!n.isContentEditable;)n=n.previousElementSibling;if(n&&n.isContentEditable)return n.focus(),e.preventDefault(),((e,n="up")=>{let l=[...e.childNodes],s=l[l.length-1];if(!s)return;if(s=["#text","BR","IMG","VIDEO"].includes(s.nodeName)||s?.dataset?.iframe?s:s.childNodes[0],!s)return!1;let r="up"==n?s.textContent.length:0;try{t.setBaseAndExtent(s,r,s,r)}catch{}})(n,"up"),!1}if(40==e.keyCode&&l==s&&(await new Promise((e=>setTimeout(e))),+new Date-window.__edw.cursor_change>50&&"true"==i.dataset.txtcustom||"true"!==i.dataset.txtcustom&&a>=u.length-1||(-1==a||r==u.length-1)&&"BR"==u[u.length-1].tag)){let t=i.nextElementSibling;for(;t&&t.nextElementSibling&&!t.isContentEditable;)t=t.nextElementSibling;if(t&&t.isContentEditable)return t.focus(),e.preventDefault(),!1}if(46==e.keyCode){if(_e(l))return void(l?.dataset?.txteditor&&!l?.innerHTML&&c("merge_next",""));let n=u.length&&"BR"==u[u.length-1].tag?u.slice(0,u.length-1):u;if(!~a&&!n.length||"DIV"==l.tagName&&0==a&&r==n.length||a==n.length-1&&r==n[n.length-1].txt?.length&&!t.toString()){let n,l,s=o;if(s&&s.isContentEditable&&(s.childNodes.length?(n=s.childNodes.length-1,l=s.childNodes[s.childNodes.length-1].textContent.length):s.focus()),c("merge_next"),e.preventDefault(),await new Promise((e=>setTimeout(e))),void 0!==n){let e=s.childNodes[n];"#text"!==e.nodeName&&"BR"!==e.nodeName&&(e=e.childNodes[0]),t.setBaseAndExtent(e,l,e,l)}return}}if(8==e.keyCode){if(_e(l))return void(l?.dataset?.txteditor&&!l?.innerHTML&&c("merge_prev",""));if(n)return;if(0==r&&(0==a||-1==a)){let n,l,s=o.previousElementSibling;if(s&&!s.isContentEditable&&(s=s.previousElementSibling),s&&s.isContentEditable&&(s.childNodes.length?(n=s.childNodes.length-1,l=s.childNodes[s.childNodes.length-1].textContent.length):s.focus()),e.preventDefault(),c("merge_prev",d),await new Promise((e=>setTimeout(e))),void 0!==n){let e=s.childNodes[n];"#text"!==e.nodeName&&"BR"!==e.nodeName&&(e=e.childNodes[0]);try{t.setBaseAndExtent(e,l,e,l)}catch{}}}}if(13==e.keyCode&&0==e.shiftKey){let t="",n="",s=-1==a?u.length-1:a+("DIV"==l.tagName&&r>0?r-1:0);if(_e(l))return e.preventDefault(),void c("enter",{html:d.trim(),next_html:"",klass:f,target:e.currentTarget});if(u.length>0&&~a){let e=Ne(u,s,r);u.splice(s,1,...e);let l=s+(0==r?0:1);l=u.find((e=>"IMG"===e.tag))?l+1:l,t=b(u.slice(0,l)),n=b(u.slice(l,u.length))}return~a||(t=b(u)),c("enter",{html:t.trim(),next_html:n.trim(),klass:f,target:e.currentTarget}),e.preventDefault(),!1}if(13==e.keyCode&&1==e.shiftKey){let e="#text"!=l.nodeName?l.parentNode:l.parentNode.parentNode;if(await new Promise((e=>setTimeout(e))),_e(e))return;if("DIV"!=l.nodeName&&(l.parentNode&&"DIV"!=l.parentNode.tagName||!["BR","#text"].includes(l.nodeName))){let n="#text"!=l.nodeName?l:l.parentNode;if(!n.parentNode){v(),await new Promise((e=>setTimeout(e)));let n=e.childNodes[a];return void t.setBaseAndExtent(n,0,n,0)}let s=[...n.childNodes],r=[];for(let e of s)e&&e.textContent?r.push({txt:e.textContent,klass:u[a]?.klass||"",tag:n.tagName}):r.push({tag:"BR",txt:""});u.splice(a,1,...r),v(),await new Promise((e=>setTimeout(e)));let o=e.childNodes["BR"==r[0].tag?a:a+2];t.setBaseAndExtent(o,0,o,0)}}e.ctrlKey||e.shiftKey||e.altKey||c("input",e)},function(e){y=e.clientX},function(e){let t=window.__edw.getSelection(),n=t.toString(),l=t.anchorNode,s=t.focusNode,r=Me(l),o=Me(s);if(l?.nodeName)if("DIV"!=l.nodeName&&"DIV"!=s.nodeName)if(L=null,n){T(t);let e=function(e,t){if(e>t){let n=e;e=t,t=n}let n=u.slice(e,t+1);if(!n[0]||!n[0].klass)return"";let l=n[0].klass,s=l.split(" ");for(let e=1;e<n.length;e++){let t=n[e];for(let e of s)t.klass&&!t.klass.includes(e)&&(l=l.replace(e,"").trim())}return l}(r,o),{href:n,blank:s}=function(e,t){if(e>t){let n=e;e=t,t=n}let n=u.slice(e,t+1),l="",s=!0;for(let e=0;e<n.length;e++){let t=n[e];if(t.href){l=t.href,s=t.blank;break}}return{href:l,blank:s}}(r,o);if(_e(l))return;c("select",{setClass:I,setGClass:A,base_node:l,classes:e,g_classes:f,href:n,blank:s,mouseX:y})}else!async function(e,t,n){let l=t.textContent.split(" ").pop();if(l&&l.startsWith("https")){let e=await te.testImgUrl(l.trim()),s=te.testVideoUrl(l.trim()),r=te.parseYouTube(l.trim())||te.parseVimeo(l.trim());(e||s||r)&&c("set_media",{setMedia:t=>{V(t),e?R(t.klass,t.alt,l,n):s?j(t.klass,t.opts,l,n):r&&S(t.klass,r,n)},media_type:e?"IMG":s?"VIDEO":r?"IFRAME":"AUDIO",base_node:t,src:r||l,delMedia:()=>z(n),mouseX:y})}}(0,l,r),O();else O()},function(e){_=e},function(e){const t=(e.clipboardData||e.originalEvent.clipboardData).items;let l=null;for(let e=0;e<t.length;e++)0===t[e].type.indexOf("image")&&(l=t[e].getAsFile());if(null!==l)Z(l);else{let t=e.path?.[0];if("BR"==t.tagName&&(t=e.path?.[1]),d.trim()){let t=(e.clipboardData||window.__edw.clipboardData).getData("text");e.preventDefault();const l=window.__edw.getSelection();if(!l.rangeCount)return!1;l.deleteFromDocument(),l.getRangeAt(0).insertNode(document.createTextNode(t)),n(0,d=C.innerHTML),g(),v(),c("input")}else c("pasteTxt",t);e.stopPropagation()}},m,w,function(t){H.call(this,e,t)},function(t){H.call(this,e,t)},function(e){E[e?"unshift":"push"]((()=>{C=e,n(4,C)}))},function(){d=this.innerHTML,n(0,d)}]}class Le extends ee{constructor(e){super(),Q(this,e,He,de,o,{html:0,gklass:1,editable:2,custom:3},null,[-1,-1])}}function Ee(t){let n,l,s;return{c(){n=h("svg"),l=h("path"),s=h("path"),b(l,"d","M8.46457 14.1213C8.07404 14.5118 8.07404 15.145 8.46457 15.5355C8.85509 15.926 9.48825 15.926 9.87878 15.5355L15.5356 9.87862C15.9262 9.4881 15.9262 8.85493 15.5356 8.46441C15.1451 8.07388 14.5119 8.07388 14.1214 8.46441L8.46457 14.1213Z"),b(l,"fill","currentColor"),b(s,"fill-rule","evenodd"),b(s,"clip-rule","evenodd"),b(s,"d","M6.34315 17.6569C9.46734 20.781 14.5327 20.781 17.6569 17.6569C20.781 14.5327 20.781 9.46734 17.6569 6.34315C14.5327 3.21895 9.46734 3.21895 6.34315 6.34315C3.21895 9.46734 3.21895 14.5327 6.34315 17.6569ZM16.2426 16.2426C13.8995 18.5858 10.1005 18.5858 7.75736 16.2426C5.41421 13.8995 5.41421 10.1005 7.75736 7.75736C10.1005 5.41421 13.8995 5.41421 16.2426 7.75736C18.5858 10.1005 18.5858 13.8995 16.2426 16.2426Z"),b(s,"fill","currentColor"),b(n,"class","w-4 h-4 text-red-700 fill-current"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Te extends ee{constructor(e){super(),Q(this,e,null,Ee,o,{})}}function Ie(e,t,n){const l=e.slice();return l[8]=t[n],l[10]=n,l}function Ae(e,t,n){const l=e.slice();return l[11]=t[n],l}function Be(e){let t,n,l;function s(...t){return e[6](e[11],e[10],...t)}return{c(){t=p("div"),b(t,"class","bg-"+e[11]+"-"+100*(e[10]+1)+" w-5 h-5 cursor-pointer")},m(e,r){u(e,t,r),n||(l=x(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&d(t),n=!1,l()}}}function Ve(e){let t,n,l=e[0],s=[];for(let t=0;t<l.length;t+=1)s[t]=Be(Ae(e,l,t));return{c(){t=p("div");for(let e=0;e<s.length;e+=1)s[e].c();n=m(),b(t,"class","flex")},m(e,l){u(e,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);c(t,n)},p(e,r){if(3&r){let o;for(l=e[0],o=0;o<l.length;o+=1){const i=Ae(e,l,o);s[o]?s[o].p(i,r):(s[o]=Be(i),s[o].c(),s[o].m(t,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(e){e&&d(t),f(s,e)}}}function De(e){let t,n,l,r,o,i,a,h,g,$,v,w,k;g=new Te({});let y=new Array(8),_=[];for(let t=0;t<y.length;t+=1)_[t]=Ve(Ie(e,y,t));return{c(){t=p("div"),n=p("div"),l=p("div"),r=p("div"),o=m(),i=p("div"),a=m(),h=p("div"),K(g.$$.fragment),$=m();for(let e=0;e<_.length;e+=1)_[e].c();b(r,"class","bg-black w-5 h-5 cursor-pointer"),b(i,"class","bg-white border border-gray-400 w-5 h-5 cursor-pointer"),b(h,"class","bg-white border-t border-b border-r border-gray-400 w-5 h-5 flex items-center justify-center cursor-pointer"),b(l,"class","flex items-center"),b(n,"class","shadow-xl border border-gray-200"),b(t,"class","flex")},m(s,d){u(s,t,d),c(t,n),c(n,l),c(l,r),c(l,o),c(l,i),c(l,a),c(l,h),Y(g,h,null),c(n,$);for(let e=0;e<_.length;e+=1)_[e].m(n,null);v=!0,w||(k=[x(r,"click",e[3]),x(i,"click",e[4]),x(h,"click",e[5])],w=!0)},p(e,[t]){if(3&t){let l;for(y=new Array(8),l=0;l<y.length;l+=1){const s=Ie(e,y,l);_[l]?_[l].p(s,t):(_[l]=Ve(s),_[l].c(),_[l].m(n,null))}for(;l<_.length;l+=1)_[l].d(1);_.length=y.length}},i(e){v||(U(g.$$.fragment,e),v=!0)},o(e){F(g.$$.fragment,e),v=!1},d(e){e&&d(t),J(g),f(_,e),w=!1,s(k)}}}function ze(e,t,n){let l=M(),{selected_color:s=""}=t;function r(e,t){n(2,s=t),l("select",t),e.preventDefault(),e.stopPropagation()}return e.$$set=e=>{"selected_color"in e&&n(2,s=e.selected_color)},[["gray","red","yellow","green","blue","indigo","purple","pink"],r,s,e=>r(e,"black"),e=>r(e,"white"),e=>r(e,"transparent"),(e,t,n)=>r(n,`${e}-${100*(t+1)}`)]}class Re extends ee{constructor(e){super(),Q(this,e,ze,De,o,{selected_color:2})}}function je(t){let n,l;return{c(){n=h("svg"),l=h("path"),b(l,"d","M6.34317 7.75732L4.92896 9.17154L12 16.2426L19.0711 9.17157L17.6569 7.75735L12 13.4142L6.34317 7.75732Z"),b(l,"fill","currentColor"),b(n,"class","w-4 h-4 text-gray-700"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Se extends ee{constructor(e){super(),Q(this,e,null,je,o,{})}}function Oe(e){let t,n,l,s;return n=new Re({props:{selected_color:e[3]}}),n.$on("select",e[5]),{c(){t=p("div"),K(n.$$.fragment),b(t,"class",l="absolute left-0 "+e[4]+" z-20 z-920 bg-white")},m(l,r){u(l,t,r),Y(n,t,null),e[9](t),s=!0},p(e,r){const o={};8&r&&(o.selected_color=e[3]),n.$set(o),(!s||16&r&&l!==(l="absolute left-0 "+e[4]+" z-20 z-920 bg-white"))&&b(t,"class",l)},i(e){s||(U(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(l){l&&d(t),J(n),e[9](null)}}}function Ze(e){let t,n,l,s,r,o,i,a,f,h;r=new Se({});let g=e[2]&&Oe(e);return{c(){t=p("div"),n=p("div"),l=p("span"),l.textContent="A",s=m(),K(r.$$.fragment),i=m(),g&&g.c(),b(l,"class",""),b(n,"class",o="font-medium flex items-center cursor-pointer "+e[0]+"-"+e[3]+" px-1"),b(t,"class","flex relative")},m(o,d){u(o,t,d),c(t,n),c(n,l),c(n,s),Y(r,n,null),c(t,i),g&&g.m(t,null),a=!0,f||(h=x(n,"click",e[6]),f=!0)},p(e,[l]){(!a||9&l&&o!==(o="font-medium flex items-center cursor-pointer "+e[0]+"-"+e[3]+" px-1"))&&b(n,"class",o),e[2]?g?(g.p(e,l),4&l&&U(g,1)):(g=Oe(e),g.c(),U(g,1),g.m(t,null)):g&&(W(),F(g,1,1,(()=>{g=null})),X())},i(e){a||(U(r.$$.fragment,e),U(g),a=!0)},o(e){F(r.$$.fragment,e),F(g),a=!1},d(e){e&&d(t),J(r),g&&g.d(),f=!1,h()}}}function Pe(e,t,n){let l,s,{txt:r="text"}=t,{setClass:o}=t,{klass:i}=t,a=["gray","red","yellow","green","blue","indigo","purple","pink"],c=!1,u="blue-500";return window.__edw.addEventListener("click",(function(){n(2,c=!1)})),e.$$set=e=>{"txt"in e&&n(0,r=e.txt),"setClass"in e&&n(7,o=e.setClass),"klass"in e&&n(8,i=e.klass)},e.$$.update=()=>{if(2&e.$$.dirty&&n(4,l=s?.getBoundingClientRect()?.bottom>window.__edw.innerHeight?"bottom-0 mb-8":"mt-8 top-0"),257&e.$$.dirty&&i){let e=i.split(" "),t=new RegExp(r+"\\-("+a.join("|")+")"),l=e.findIndex((e=>t.test(e)));n(3,u=~l?e[l].replace(r+"-",""):"")}},[r,s,c,u,l,function(e){o(r+"-"+e.detail),n(3,u=e.detail)},function(e){n(2,c=!c),e.stopPropagation(),e.preventDefault()},o,i,function(e){E[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class Ge extends ee{constructor(e){super(),Q(this,e,Pe,Ze,o,{txt:0,setClass:7,klass:8})}}function We(t){let n,l,s;return{c(){n=h("svg"),l=h("path"),s=h("path"),b(l,"d","M9.95263 16.9123L8.59323 18.3608L2.03082 12.2016L8.18994 5.63922L9.64826 7.00791L4.85783 12.112L9.95212 16.8932L9.95263 16.9123Z"),b(l,"fill","currentColor"),b(s,"d","M14.0474 16.9123L15.4068 18.3608L21.9692 12.2016L15.8101 5.63922L14.3517 7.00791L19.1422 12.112L14.0479 16.8932L14.0474 16.9123Z"),b(s,"fill","currentColor"),b(n,"class","w-4 h-4"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Xe extends ee{constructor(e){super(),Q(this,e,null,We,o,{})}}function Ue(e){let t,n,l,r,o,i,a,f,h,v,k,y;return{c(){t=p("div"),n=p("input"),l=m(),r=p("button"),r.textContent="Link",o=m(),i=p("button"),i.textContent="Unlink",a=m(),f=p("label"),h=p("input"),v=g("\n        _Blank"),b(n,"type","text"),b(n,"placeholder","Past your link, such as http://fouita.com"),b(n,"class","bg-gray-100 border p-1 w-64 rounded outline-none shadow-inner"),b(r,"class","ml-2 hover:bg-gray-300 px-3 rounded outline-none"),b(i,"class","hover:bg-gray-300 px-3 rounded outline-none"),b(h,"type","checkbox"),b(h,"class","mr-2"),b(f,"class","flex items-center text-black text-xs"),b(t,"class","absolute p-3 shadow-xl flex rounded bg-white -ml-24 mt-1 z-920 z-20")},m(s,d){u(s,t,d),c(t,n),w(n,e[0]),c(t,l),c(t,r),c(t,o),c(t,i),c(t,a),c(t,f),c(f,h),h.checked=e[1],c(f,v),k||(y=[x(n,"click",qe),x(n,"focus",qe),x(n,"input",e[9]),x(r,"click",e[4]),x(i,"click",e[5]),x(h,"change",e[10]),x(f,"click",$(e[8])),x(t,"click",qe)],k=!0)},p(e,t){1&t&&n.value!==e[0]&&w(n,e[0]),2&t&&(h.checked=e[1])},d(e){e&&d(t),k=!1,s(y)}}}function Fe(t){let n,l,r,o,i,a=t[2]&&Ue(t);return{c(){n=p("div"),l=p("span"),l.innerHTML='<span class="border-b border-gray-400">Link</span>',r=m(),a&&a.c(),b(l,"class","px-2 py-1"),b(n,"class","relative")},m(e,s){u(e,n,s),c(n,l),c(n,r),a&&a.m(n,null),o||(i=[x(l,"click",t[3]),x(n,"mousedown",t[7])],o=!0)},p(e,[t]){e[2]?a?a.p(e,t):(a=Ue(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&d(n),a&&a.d(),o=!1,s(i)}}}function qe(e){return e.preventDefault(),e.stopPropagation(),!1}function Ke(e,t,n){let{href:l}=t,{blank:s=!0}=t,r=!1,{setLink:o}=t;function i(){n(2,r=!1)}return window.__edw.addEventListener("click",i),e.$$set=e=>{"href"in e&&n(0,l=e.href),"blank"in e&&n(1,s=e.blank),"setLink"in e&&n(6,o=e.setLink)},[l,s,r,function(e){n(2,r=!r),qe(e)},function(){o("link",l,{blank:s}),i()},function(){o("link",null),i()},o,function(t){H.call(this,e,t)},function(t){H.call(this,e,t)},function(){l=this.value,n(0,l)},function(){s=this.checked,n(1,s)}]}class Ye extends ee{constructor(e){super(),Q(this,e,Ke,Fe,o,{href:0,blank:1,setLink:6})}}function Je(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),s=h("path"),r=h("path"),o=h("path"),b(l,"d","M4 5C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H4Z"),b(l,"fill","currentColor"),b(s,"d","M4 9C3.44772 9 3 9.44772 3 10C3 10.5523 3.44772 11 4 11H20C20.5523 11 21 10.5523 21 10C21 9.44772 20.5523 9 20 9H4Z"),b(s,"fill","currentColor"),b(r,"d","M3 14C3 13.4477 3.44772 13 4 13H20C20.5523 13 21 13.4477 21 14C21 14.5523 20.5523 15 20 15H4C3.44772 15 3 14.5523 3 14Z"),b(r,"fill","currentColor"),b(o,"d","M4 17C3.44772 17 3 17.4477 3 18C3 18.5523 3.44772 19 4 19H20C20.5523 19 21 18.5523 21 18C21 17.4477 20.5523 17 20 17H4Z"),b(o,"fill","currentColor"),b(n,"class","w-5 h-5"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s),c(n,r),c(n,o)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Qe extends ee{constructor(e){super(),Q(this,e,null,Je,o,{})}}function et(t){let n,l;return{c(){n=h("svg"),l=h("path"),b(l,"d","M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z"),b(l,"fill","currentColor"),b(n,"class","w-4 h-4 text-gray-700"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l)},p:e,i:e,o:e,d(e){e&&d(n)}}}class tt extends ee{constructor(e){super(),Q(this,e,null,et,o,{})}}function nt(e,t,n){const l=e.slice();return l[5]=t[n],l}function lt(e){let t,n;return t=new tt({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function st(e){let t,n,l,s,r,o,i,a,f,h=e[5].label+"",$=e[0]==e[5].value&&lt();function w(...t){return e[3](e[5],...t)}return{c(){t=p("div"),$&&$.c(),n=m(),l=p("span"),s=g(h),o=m(),b(l,"class",r=(e[0]==e[5].value?"ml-1":"ml-5")+" pr-2"),b(t,"class","px-2 py-1 flex items-center hover:bg-gray-200 cursor-pointer")},m(e,r){u(e,t,r),$&&$.m(t,null),c(t,n),c(t,l),c(l,s),c(t,o),i=!0,a||(f=x(t,"click",w),a=!0)},p(o,a){(e=o)[0]==e[5].value?$?3&a&&U($,1):($=lt(),$.c(),U($,1),$.m(t,n)):$&&(W(),F($,1,1,(()=>{$=null})),X()),(!i||2&a)&&h!==(h=e[5].label+"")&&v(s,h),(!i||3&a&&r!==(r=(e[0]==e[5].value?"ml-1":"ml-5")+" pr-2"))&&b(l,"class",r)},i(e){i||(U($),i=!0)},o(e){F($),i=!1},d(e){e&&d(t),$&&$.d(),a=!1,f()}}}function rt(e){let t,n,l=e[1],s=[];for(let t=0;t<l.length;t+=1)s[t]=st(nt(e,l,t));const r=e=>F(s[e],1,1,(()=>{s[e]=null}));return{c(){t=p("div");for(let e=0;e<s.length;e+=1)s[e].c();b(t,"class","shadow-xl border-r border-l rounded mt-1 bg-white")},m(e,l){u(e,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,[n]){if(7&n){let o;for(l=e[1],o=0;o<l.length;o+=1){const r=nt(e,l,o);s[o]?(s[o].p(r,n),U(s[o],1)):(s[o]=st(r),s[o].c(),U(s[o],1),s[o].m(t,null))}for(W(),o=l.length;o<s.length;o+=1)r(o);X()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)U(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)F(s[e]);n=!1},d(e){e&&d(t),f(s,e)}}}function ot(e,t,n){let l=M(),{list:s=[]}=t,{selected:r}=t;function o(e,t){n(0,r=t),l("select",r),e.stopPropagation(),e.preventDefault()}return e.$$set=e=>{"list"in e&&n(1,s=e.list),"selected"in e&&n(0,r=e.selected)},[r,s,o,(e,t)=>o(t,e.value)]}class it extends ee{constructor(e){super(),Q(this,e,ot,rt,o,{list:1,selected:0})}}function at(e){let t,n,l,s;return n=new it({props:{list:e[3],selected:e[2]}}),n.$on("select",e[9]),{c(){t=p("div"),K(n.$$.fragment),b(t,"class",l="absolute -ml-1 z-920 z-20 "+e[1]+" "+e[5])},m(l,r){u(l,t,r),Y(n,t,null),e[10](t),s=!0},p(e,r){const o={};8&r&&(o.list=e[3]),4&r&&(o.selected=e[2]),n.$set(o),(!s||34&r&&l!==(l="absolute -ml-1 z-920 z-20 "+e[1]+" "+e[5]))&&b(t,"class",l)},i(e){s||(U(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(l){l&&d(t),J(n),e[10](null)}}}function ct(e){let t,n,l,s,r,o;const a=e[8].default,f=function(e,t,n,l){if(e){const s=i(e,t,n,l);return e[0](s)}}(a,e,e[7],null),h=f||function(e){let t;return{c(){t=g("Click To show")},m(e,n){u(e,t,n)},d(e){e&&d(t)}}}();let $=e[0]&&at(e);return{c(){t=p("div"),n=p("div"),h&&h.c(),l=m(),$&&$.c(),b(n,"class","cursor-pointer flex h-full"),b(t,"class","relative")},m(i,a){u(i,t,a),c(t,n),h&&h.m(n,null),c(t,l),$&&$.m(t,null),s=!0,r||(o=x(n,"click",e[6]),r=!0)},p(e,[n]){f&&f.p&&(!s||128&n)&&function(e,t,n,l,s,r){if(s){const o=i(t,n,l,r);e.p(o,s)}}(f,a,e,e[7],s?function(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}(a,e[7],n,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[7]),null),e[0]?$?($.p(e,n),1&n&&U($,1)):($=at(e),$.c(),U($,1),$.m(t,null)):$&&(W(),F($,1,1,(()=>{$=null})),X())},i(e){s||(U(h,e),U($),s=!0)},o(e){F(h,e),F($),s=!1},d(e){e&&d(t),h&&h.d(e),$&&$.d(),r=!1,o()}}}function ut(e,t,n){let l,s,{$$slots:r={},$$scope:o}=t,{class:i=""}=t,{open:a=!1}=t,{selected:c}=t,{list:u=[{label:"none",value:"none"},{label:"tight",value:"tight"},{label:"snug",value:"snug"},{label:"normal",value:"normal"},{label:"relaxed",value:"relaxed"},{label:"loose",value:"loose"}]}=t;return window.__edw.addEventListener("click",(function(){n(0,a=!1)})),e.$$set=e=>{"class"in e&&n(1,i=e.class),"open"in e&&n(0,a=e.open),"selected"in e&&n(2,c=e.selected),"list"in e&&n(3,u=e.list),"$$scope"in e&&n(7,o=e.$$scope)},e.$$.update=()=>{16&e.$$.dirty&&n(5,l=s?.getBoundingClientRect()?.bottom>window.__edw.innerHeight?"bottom-0 mb-8":"")},[a,i,c,u,s,l,function(e){n(0,a=!a),e.preventDefault(),e.stopPropagation()},o,r,function(t){H.call(this,e,t)},function(e){E[e?"unshift":"push"]((()=>{s=e,n(4,s)}))}]}class dt extends ee{constructor(e){super(),Q(this,e,ut,ct,o,{class:1,open:0,selected:2,list:3})}}function ft(t){let n,l,s,r,o,i;return{c(){n=h("svg"),l=h("path"),s=h("path"),r=h("path"),o=h("path"),i=h("path"),b(l,"d","M5.09668 6.99707H7.17358L4.17358 3.99707L1.17358 6.99707H3.09668V17.0031H1.15881L4.15881 20.0031L7.15881 17.0031H5.09668V6.99707Z"),b(l,"fill","currentColor"),b(s,"d","M22.8412 7H8.84119V5H22.8412V7Z"),b(s,"fill","currentColor"),b(r,"d","M22.8412 11H8.84119V9H22.8412V11Z"),b(r,"fill","currentColor"),b(o,"d","M8.84119 15H22.8412V13H8.84119V15Z"),b(o,"fill","currentColor"),b(i,"d","M22.8412 19H8.84119V17H22.8412V19Z"),b(i,"fill","currentColor"),b(n,"class","w-5 h-5 text-gray-700"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s),c(n,r),c(n,o),c(n,i)},p:e,i:e,o:e,d(e){e&&d(n)}}}class pt extends ee{constructor(e){super(),Q(this,e,null,ft,o,{})}}function ht(t){let n,l,s;return l=new pt({}),{c(){n=p("div"),K(l.$$.fragment),b(n,"class","pl-2 pr-3 py-1 h-full flex items-center")},m(e,t){u(e,n,t),Y(l,n,null),s=!0},p:e,i(e){s||(U(l.$$.fragment,e),s=!0)},o(e){F(l.$$.fragment,e),s=!1},d(e){e&&d(n),J(l)}}}function gt(e){let t,n,l,s;function r(t){e[7](t)}let o={list:e[3],selected:e[1],class:"text-sm",$$slots:{default:[ht]},$$scope:{ctx:e}};return void 0!==e[0]&&(o.open=e[0]),n=new dt({props:o}),E.push((()=>q(n,"open",r,e[0]))),n.$on("select",e[2]),{c(){t=p("div"),K(n.$$.fragment),b(t,"class","flex h-full")},m(e,l){u(e,t,l),Y(n,t,null),s=!0},p(e,[t]){const s={};2&t&&(s.selected=e[1]),256&t&&(s.$$scope={dirty:t,ctx:e}),!l&&1&t&&(l=!0,s.open=e[0],R((()=>l=!1))),n.$set(s)},i(e){s||(U(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(e){e&&d(t),J(n)}}}function mt(e,t,n){let l,s,{klass:r=""}=t,{setClass:o=""}=t,i=!1;return e.$$set=e=>{"klass"in e&&n(4,r=e.klass),"setClass"in e&&n(5,o=e.setClass)},e.$$.update=()=>{16&e.$$.dirty&&n(6,l=r.split(" ").find((e=>e.startsWith("leading")))||""),64&e.$$.dirty&&n(1,s=l.replace("leading-",""))},[i,s,function(e){n(0,i=!1),n(1,s=e.detail),o("leading-"+e.detail+" md:leading-"+e.detail)},[{label:"none",value:"none"},{label:"tight",value:"tight"},{label:"snug",value:"snug"},{label:"normal",value:"normal"},{label:"relaxed",value:"relaxed"},{label:"loose",value:"loose"}],r,o,l,function(e){i=e,n(0,i)}]}class xt extends ee{constructor(e){super(),Q(this,e,mt,gt,o,{klass:4,setClass:5})}}function $t(e){let t,n,l,s,r;return s=new Se({}),{c(){t=p("div"),n=g(e[2]),l=m(),K(s.$$.fragment),b(t,"class","pl-2 pr-3 py-1 h-full flex items-center whitespace-nowrap flex-shrink-0")},m(e,o){u(e,t,o),c(t,n),c(t,l),Y(s,t,null),r=!0},p(e,t){(!r||4&t)&&v(n,e[2])},i(e){r||(U(s.$$.fragment,e),r=!0)},o(e){F(s.$$.fragment,e),r=!1},d(e){e&&d(t),J(s)}}}function bt(e){let t,n,l,s;function r(t){e[9](t)}let o={list:e[3],selected:e[0],class:"w-32 text-sm",$$slots:{default:[$t]},$$scope:{ctx:e}};return void 0!==e[1]&&(o.open=e[1]),n=new dt({props:o}),E.push((()=>q(n,"open",r,e[1]))),n.$on("select",e[4]),{c(){t=p("div"),K(n.$$.fragment),b(t,"class","flex h-full")},m(e,l){u(e,t,l),Y(n,t,null),s=!0},p(e,[t]){const s={};1&t&&(s.selected=e[0]),2052&t&&(s.$$scope={dirty:t,ctx:e}),!l&&2&t&&(l=!0,s.open=e[1],R((()=>l=!1))),n.$set(s)},i(e){s||(U(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(e){e&&d(t),J(n)}}}let vt="code text-sm font-mono px-8 py-6 bg-gray-100",wt="quote text-xl border-l-4 border-gray-800 px-4";function kt(e,t,n){let l,s,r,o,{setClass:i}=t,{klass:a=""}=t,c=[{label:"Text Small",value:"md:text-sm text-sm"},{label:"Text",value:"md:text-base text-base"},{label:"Code",value:vt},{label:"Quote",value:wt},{label:"Heading 1",value:"md:text-6xl text-4xl"},{label:"Heading 2",value:"md:text-5xl text-3xl"},{label:"Heading 3",value:"md:text-4xl text-2xl"},{label:"Heading 4",value:"md:text-3xl text-xl"},{label:"Heading 5",value:"md:text-2xl text-xl"},{label:"Heading 6",value:"md:text-xl text-lg"}];let u=!1;return e.$$set=e=>{"setClass"in e&&n(5,i=e.setClass),"klass"in e&&n(6,a=e.klass)},e.$$.update=()=>{64&e.$$.dirty&&n(8,l=a.includes("code")&&vt||a.includes("quote")&&wt||function(){for(let e of c)if(~a.indexOf(e.value))return e.value;return!1}()||""),256&e.$$.dirty&&n(0,s=l),1&e.$$.dirty&&n(7,r=c.find((e=>e.value==s))),128&e.$$.dirty&&n(2,o=r&&r.label||"Text")},[s,u,o,c,function(e){n(0,s=e.detail),n(1,u=!1),i(e.detail)},i,a,r,l,function(e){u=e,n(1,u)}]}class yt extends ee{constructor(e){super(),Q(this,e,kt,bt,o,{setClass:5,klass:6})}}function _t(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),s=h("path"),r=h("path"),o=h("path"),b(l,"d","M4 5C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H4Z"),b(l,"fill","currentColor"),b(s,"d","M4 13C3.44772 13 3 13.4477 3 14C3 14.5523 3.44772 15 4 15H20C20.5523 15 21 14.5523 21 14C21 13.4477 20.5523 13 20 13H4Z"),b(s,"fill","currentColor"),b(r,"d","M6 10C6 9.44772 6.44772 9 7 9H17C17.5523 9 18 9.44772 18 10C18 10.5523 17.5523 11 17 11H7C6.44772 11 6 10.5523 6 10Z"),b(r,"fill","currentColor"),b(o,"d","M7 17C6.44772 17 6 17.4477 6 18C6 18.5523 6.44772 19 7 19H17C17.5523 19 18 18.5523 18 18C18 17.4477 17.5523 17 17 17H7Z"),b(o,"fill","currentColor"),b(n,"class","w-5 h-5"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s),c(n,r),c(n,o)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Ct extends ee{constructor(e){super(),Q(this,e,null,_t,o,{})}}function Nt(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),s=h("path"),r=h("path"),o=h("path"),b(l,"d","M4 5C3.44772 5 3 5.44772 3 6C3 6.55228 3.44772 7 4 7H20C20.5523 7 21 6.55228 21 6C21 5.44772 20.5523 5 20 5H4Z"),b(l,"fill","currentColor"),b(s,"d","M4 9C3.44772 9 3 9.44772 3 10C3 10.5523 3.44772 11 4 11H12C12.5523 11 13 10.5523 13 10C13 9.44772 12.5523 9 12 9H4Z"),b(s,"fill","currentColor"),b(r,"d","M3 14C3 13.4477 3.44772 13 4 13H20C20.5523 13 21 13.4477 21 14C21 14.5523 20.5523 15 20 15H4C3.44772 15 3 14.5523 3 14Z"),b(r,"fill","currentColor"),b(o,"d","M4 17C3.44772 17 3 17.4477 3 18C3 18.5523 3.44772 19 4 19H12C12.5523 19 13 18.5523 13 18C13 17.4477 12.5523 17 12 17H4Z"),b(o,"fill","currentColor"),b(n,"class","w-5 h-5"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s),c(n,r),c(n,o)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Mt extends ee{constructor(e){super(),Q(this,e,null,Nt,o,{})}}function Ht(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),s=h("path"),r=h("path"),o=h("path"),b(l,"d","M20 5C20.5523 5 21 5.44772 21 6C21 6.55228 20.5523 7 20 7H4C3.44772 7 3 6.55228 3 6C3 5.44772 3.44772 5 4 5H20Z"),b(l,"fill","currentColor"),b(s,"d","M20 9C20.5523 9 21 9.44772 21 10C21 10.5523 20.5523 11 20 11H12C11.4477 11 11 10.5523 11 10C11 9.44772 11.4477 9 12 9H20Z"),b(s,"fill","currentColor"),b(r,"d","M21 14C21 13.4477 20.5523 13 20 13H4C3.44772 13 3 13.4477 3 14C3 14.5523 3.44772 15 4 15H20C20.5523 15 21 14.5523 21 14Z"),b(r,"fill","currentColor"),b(o,"d","M20 17C20.5523 17 21 17.4477 21 18C21 18.5523 20.5523 19 20 19H12C11.4477 19 11 18.5523 11 18C11 17.4477 11.4477 17 12 17H20Z"),b(o,"fill","currentColor"),b(n,"class","w-5 h-5"),b(n,"viewBox","0 0 24 24"),b(n,"fill","none"),b(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){u(e,n,t),c(n,l),c(n,s),c(n,r),c(n,o)},p:e,i:e,o:e,d(e){e&&d(n)}}}class Lt extends ee{constructor(e){super(),Q(this,e,null,Ht,o,{})}}function Et(t){let n,l;return{c(){n=h("svg"),l=h("path"),b(l,"d","M5 6h10l-5 9l-5-9z"),b(l,"fill","currentColor"),b(n,"viewBox","0 0 20 20"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",t[0])},m(e,t){u(e,n,t),c(n,l)},p(e,[t]){1&t&&b(n,"class",e[0])},i:e,o:e,d(e){e&&d(n)}}}function Tt(e,t,n){let{class:l="w-3 h-3"}=t;return e.$$set=e=>{"class"in e&&n(0,l=e.class)},[l]}class It extends ee{constructor(e){super(),Q(this,e,Tt,Et,o,{class:0})}}const At="italic",Bt="underline",Vt="line-through",Dt="font-mono px-2 border border-gray-200",zt="link",Rt="text-center",jt="text-left",St="text-right",Ot="text-justify",Zt=["0","px","0.5","1","2","3","4","5","10","20","40","60"],Pt=["auto","full","3","4","10","16","20","32","40","60","80","96","128"];function Gt(e){let t,n;return t=new Mt({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Wt(e){let t,n;return t=new Lt({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Xt(e){let t,n;return t=new Ct({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ut(e){let t,n,l,r,o,i,a,f,h,g,$,v,w,k,y,_;return l=new Mt({}),a=new Ct({}),$=new Lt({}),{c(){t=p("div"),n=p("div"),K(l.$$.fragment),o=m(),i=p("div"),K(a.$$.fragment),h=m(),g=p("div"),K($.$$.fragment),b(n,"class",r="px-2 "+(e[0].left?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"),b(i,"class",f="px-2 "+(e[0].center?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"),b(g,"class",v="px-2 "+(e[0].right?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center border-r"),b(t,"class",w="absolute shadow-xl "+e[3]+" bg-white")},m(s,r){u(s,t,r),c(t,n),Y(l,n,null),c(t,o),c(t,i),Y(a,i,null),c(t,h),c(t,g),Y($,g,null),e[9](t),k=!0,y||(_=[x(n,"mousedown",e[6]),x(i,"mousedown",e[7]),x(g,"mousedown",e[8])],y=!0)},p(e,l){(!k||1&l&&r!==(r="px-2 "+(e[0].left?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"))&&b(n,"class",r),(!k||1&l&&f!==(f="px-2 "+(e[0].center?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"))&&b(i,"class",f),(!k||1&l&&v!==(v="px-2 "+(e[0].right?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center border-r"))&&b(g,"class",v),(!k||8&l&&w!==(w="absolute shadow-xl "+e[3]+" bg-white"))&&b(t,"class",w)},i(e){k||(U(l.$$.fragment,e),U(a.$$.fragment,e),U($.$$.fragment,e),k=!0)},o(e){F(l.$$.fragment,e),F(a.$$.fragment,e),F($.$$.fragment,e),k=!1},d(n){n&&d(t),J(l),J(a),J($),e[9](null),y=!1,s(_)}}}function Ft(e){let t,n,l,s,r,o,i,a,f,h;const g=[Xt,Wt,Gt],$=[];function v(e,t){return e[0].center?0:e[0].right?1:2}l=v(e),s=$[l]=g[l](e),o=new It({});let w=e[2]&&Ut(e);return{c(){t=p("div"),n=p("div"),s.c(),r=m(),K(o.$$.fragment),i=m(),w&&w.c(),b(n,"class","px-2 text-gray-700 hover:bg-gray-200 cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"),b(t,"class","relative h-full")},m(s,d){u(s,t,d),c(t,n),$[l].m(n,null),c(n,r),Y(o,n,null),c(t,i),w&&w.m(t,null),a=!0,f||(h=x(n,"mousedown",e[4]),f=!0)},p(e,[o]){let i=l;l=v(e),l!==i&&(W(),F($[i],1,1,(()=>{$[i]=null})),X(),s=$[l],s||(s=$[l]=g[l](e),s.c()),U(s,1),s.m(n,r)),e[2]?w?(w.p(e,o),4&o&&U(w,1)):(w=Ut(e),w.c(),U(w,1),w.m(t,null)):w&&(W(),F(w,1,1,(()=>{w=null})),X())},i(e){a||(U(s),U(o.$$.fragment,e),U(w),a=!0)},o(e){F(s),F(o.$$.fragment,e),F(w),a=!1},d(e){e&&d(t),$[l].d(),J(o),w&&w.d(),f=!1,h()}}}function qt(e,t,n){let l;const s=M();let r,{e_classes:o}=t,i=!1;function a(e){s("select",e)}return e.$$set=e=>{"e_classes"in e&&n(0,o=e.e_classes)},e.$$.update=()=>{2&e.$$.dirty&&n(3,l=r?.getBoundingClientRect()?.bottom>window.__edw.innerHeight?"bottom-0 mb-8":"")},[o,r,i,l,function(){n(2,i=!i)},a,()=>a(jt),()=>a(Rt),()=>a(St),function(e){E[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Kt extends ee{constructor(e){super(),Q(this,e,qt,Ft,o,{e_classes:0})}}function Yt(t){let n,l,s;return{c(){n=h("svg"),l=h("g"),s=h("path"),b(s,"fill-rule","evenodd"),b(s,"clip-rule","evenodd"),b(s,"d","M2.857 2h9.286c.473 0 .857.384.857.857v9.286a.857.857 0 0 1-.857.857H2.857A.857.857 0 0 1 2 12.143V2.857C2 2.384 2.384 2 2.857 2zM1 2.857C1 1.831 1.831 1 2.857 1h9.286C13.168 1 14 1.831 14 2.857v9.286A1.857 1.857 0 0 1 12.143 14H2.857A1.857 1.857 0 0 1 1 12.143V2.857zM7.5 5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm-3 6a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zM5 7.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM4.5 5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm6.5 5.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM10.5 8a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm.5-3.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM7.5 11a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1z"),b(s,"fill","currentColor"),b(l,"fill","none"),b(n,"viewBox","0 0 15 15"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",t[0])},m(e,t){u(e,n,t),c(n,l),c(l,s)},p(e,[t]){1&t&&b(n,"class",e[0])},i:e,o:e,d(e){e&&d(n)}}}function Jt(e,t,n){let{class:l="w-5 h-5"}=t;return e.$$set=e=>{"class"in e&&n(0,l=e.class)},[l]}class Qt extends ee{constructor(e){super(),Q(this,e,Jt,Yt,o,{class:0})}}function en(t){let n,l,s;return{c(){n=h("svg"),l=h("g"),s=h("path"),b(s,"fill-rule","evenodd"),b(s,"clip-rule","evenodd"),b(s,"d","M1.5 2a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm3 0a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zM8 1.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zm2.5.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm3.5-.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM1.5 14a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm.5-3.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM1.5 8a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zM2 4.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM13.5 11a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm.5-3.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zM13.5 5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zM5 13.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zm2.5.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zm3.5-.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0zm2.5.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1zM4 5a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5zm1 0h5v5H5V5z"),b(s,"fill","currentColor"),b(l,"fill","none"),b(n,"viewBox","0 0 15 15"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",t[0])},m(e,t){u(e,n,t),c(n,l),c(l,s)},p(e,[t]){1&t&&b(n,"class",e[0])},i:e,o:e,d(e){e&&d(n)}}}function tn(e,t,n){let{class:l="w-5 h-5"}=t;return e.$$set=e=>{"class"in e&&n(0,l=e.class)},[l]}class nn extends ee{constructor(e){super(),Q(this,e,tn,en,o,{class:0})}}function ln(e,t,n){const l=e.slice();return l[19]=t[n],l}function sn(e,t,n){const l=e.slice();return l[19]=t[n],l}function rn(e,t,n){const l=e.slice();return l[19]=t[n],l}function on(e,t,n){const l=e.slice();return l[19]=t[n],l}function an(e){let t,n;return t=new Qt({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function cn(e){let t,n;return t=new nn({}),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function un(e){let t,n,l,r,o,i,a,h,m,$,v,w,y=Zt,_=[];for(let t=0;t<y.length;t+=1)_[t]=dn(on(e,y,t));let C=Zt,N=[];for(let t=0;t<C.length;t+=1)N[t]=fn(rn(e,C,t));let M=Zt,H=[];for(let t=0;t<M.length;t+=1)H[t]=pn(sn(e,M,t));let L=Zt,E=[];for(let t=0;t<L.length;t+=1)E[t]=hn(ln(e,L,t));return{c(){t=p("div"),n=g("Top \r\n                "),l=p("select");for(let e=0;e<_.length;e+=1)_[e].c();r=g("\r\n                Right \r\n                "),o=p("select");for(let e=0;e<N.length;e+=1)N[e].c();i=g("\r\n                Bottom \r\n                "),a=p("select");for(let e=0;e<H.length;e+=1)H[e].c();h=g("\r\n                Left \r\n                "),m=p("select");for(let e=0;e<E.length;e+=1)E[e].c();b(l,"class","focus:outline-none border"),void 0===e[7]&&z((()=>e[13].call(l))),b(o,"class","focus:outline-none border"),void 0===e[6]&&z((()=>e[14].call(o))),b(a,"class","focus:outline-none border"),void 0===e[5]&&z((()=>e[15].call(a))),b(m,"class","focus:outline-none border"),void 0===e[4]&&z((()=>e[16].call(m))),b(t,"class",$="absolute shadow-xl bg-white grid grid-cols-2 w-24 p-2 gap-1 text-xs font-semibold "+e[8])},m(s,d){u(s,t,d),c(t,n),c(t,l);for(let e=0;e<_.length;e+=1)_[e].m(l,null);k(l,e[7]),c(t,r),c(t,o);for(let e=0;e<N.length;e+=1)N[e].m(o,null);k(o,e[6]),c(t,i),c(t,a);for(let e=0;e<H.length;e+=1)H[e].m(a,null);k(a,e[5]),c(t,h),c(t,m);for(let e=0;e<E.length;e+=1)E[e].m(m,null);k(m,e[4]),e[17](t),v||(w=[x(l,"change",e[13]),x(l,"change",e[10]),x(l,"blur",e[10]),x(o,"change",e[14]),x(o,"change",e[10]),x(o,"blur",e[10]),x(a,"change",e[15]),x(a,"change",e[10]),x(a,"blur",e[10]),x(m,"change",e[16]),x(m,"change",e[10]),x(m,"blur",e[10])],v=!0)},p(e,n){if(1&n){let t;for(y=Zt,t=0;t<y.length;t+=1){const s=on(e,y,t);_[t]?_[t].p(s,n):(_[t]=dn(s),_[t].c(),_[t].m(l,null))}for(;t<_.length;t+=1)_[t].d(1);_.length=y.length}if(129&n&&k(l,e[7]),1&n){let t;for(C=Zt,t=0;t<C.length;t+=1){const l=rn(e,C,t);N[t]?N[t].p(l,n):(N[t]=fn(l),N[t].c(),N[t].m(o,null))}for(;t<N.length;t+=1)N[t].d(1);N.length=C.length}if(65&n&&k(o,e[6]),1&n){let t;for(M=Zt,t=0;t<M.length;t+=1){const l=sn(e,M,t);H[t]?H[t].p(l,n):(H[t]=pn(l),H[t].c(),H[t].m(a,null))}for(;t<H.length;t+=1)H[t].d(1);H.length=M.length}if(33&n&&k(a,e[5]),1&n){let t;for(L=Zt,t=0;t<L.length;t+=1){const l=ln(e,L,t);E[t]?E[t].p(l,n):(E[t]=hn(l),E[t].c(),E[t].m(m,null))}for(;t<E.length;t+=1)E[t].d(1);E.length=L.length}17&n&&k(m,e[4]),256&n&&$!==($="absolute shadow-xl bg-white grid grid-cols-2 w-24 p-2 gap-1 text-xs font-semibold "+e[8])&&b(t,"class",$)},d(n){n&&d(t),f(_,n),f(N,n),f(H,n),f(E,n),e[17](null),v=!1,s(w)}}}function dn(e){let t,n,l,s=e[19]+"";return{c(){t=p("option"),n=g(s),t.__value=l=e[0]+"t-"+e[19],t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,n){1&n&&l!==(l=e[0]+"t-"+e[19])&&(t.__value=l,t.value=t.__value)},d(e){e&&d(t)}}}function fn(e){let t,n,l,s=e[19]+"";return{c(){t=p("option"),n=g(s),t.__value=l=e[0]+"r-"+e[19],t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,n){1&n&&l!==(l=e[0]+"r-"+e[19])&&(t.__value=l,t.value=t.__value)},d(e){e&&d(t)}}}function pn(e){let t,n,l,s=e[19]+"";return{c(){t=p("option"),n=g(s),t.__value=l=e[0]+"b-"+e[19],t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,n){1&n&&l!==(l=e[0]+"b-"+e[19])&&(t.__value=l,t.value=t.__value)},d(e){e&&d(t)}}}function hn(e){let t,n,l,s=e[19]+"";return{c(){t=p("option"),n=g(s),t.__value=l=e[0]+"l-"+e[19],t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,n){1&n&&l!==(l=e[0]+"l-"+e[19])&&(t.__value=l,t.value=t.__value)},d(e){e&&d(t)}}}function gn(e){let t,n,l,s,r,o,i,a,f,h;const g=[cn,an],$=[];function v(e,t){return"m"==e[0]?0:1}l=v(e),s=$[l]=g[l](e),o=new It({});let w=e[3]&&un(e);return{c(){t=p("div"),n=p("div"),s.c(),r=m(),K(o.$$.fragment),i=m(),w&&w.c(),b(n,"class","px-2 text-gray-700 hover:bg-gray-200 cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"),b(t,"class","relative h-full"),b(t,"title",e[1])},m(s,d){u(s,t,d),c(t,n),$[l].m(n,null),c(n,r),Y(o,n,null),c(t,i),w&&w.m(t,null),a=!0,f||(h=x(n,"mousedown",e[9]),f=!0)},p(e,[o]){let i=l;l=v(e),l!==i&&(W(),F($[i],1,1,(()=>{$[i]=null})),X(),s=$[l],s||(s=$[l]=g[l](e),s.c()),U(s,1),s.m(n,r)),e[3]?w?w.p(e,o):(w=un(e),w.c(),w.m(t,null)):w&&(w.d(1),w=null),(!a||2&o)&&b(t,"title",e[1])},i(e){a||(U(s),U(o.$$.fragment,e),a=!0)},o(e){F(s),F(o.$$.fragment,e),a=!1},d(e){e&&d(t),$[l].d(),J(o),w&&w.d(),f=!1,h()}}}function mn(e,t,n){let l,s,r,o,i,a;const c=M();let u,{mp:d="p"}=t,{g_classes:f=""}=t,{title:p="Padding"}=t,h=!1;return e.$$set=e=>{"mp"in e&&n(0,d=e.mp),"g_classes"in e&&n(11,f=e.g_classes),"title"in e&&n(1,p=e.title)},e.$$.update=()=>{4&e.$$.dirty&&n(8,l=u?.getBoundingClientRect()?.bottom>window.__edw.innerHeight?"bottom-0 mb-8":""),6145&e.$$.dirty&&n(7,r=f.split(" ").find((e=>e.startsWith(`${d}t`)))||`${d}t-${s}`),6145&e.$$.dirty&&n(6,o=f.split(" ").find((e=>e.startsWith(`${d}r`)))||`${d}r-${s}`),6145&e.$$.dirty&&n(5,i=f.split(" ").find((e=>e.startsWith(`${d}b`)))||`${d}b-${s}`),6145&e.$$.dirty&&n(4,a=f.split(" ").find((e=>e.startsWith(`${d}l`)))||`${d}l-${s}`)},n(12,s=0),[d,p,u,h,a,i,o,r,l,function(){n(3,h=!h)},function(e){c("select",e.currentTarget.value)},f,s,function(){r=y(this),n(7,r),n(11,f),n(0,d),n(12,s),n(0,d)},function(){o=y(this),n(6,o),n(11,f),n(0,d),n(12,s),n(0,d)},function(){i=y(this),n(5,i),n(11,f),n(0,d),n(12,s),n(0,d)},function(){a=y(this),n(4,a),n(11,f),n(0,d),n(12,s),n(0,d)},function(e){E[e?"unshift":"push"]((()=>{u=e,n(2,u)}))}]}class xn extends ee{constructor(e){super(),Q(this,e,mn,gn,o,{mp:0,g_classes:11,title:1})}}function $n(e){let t,n,l,r,o,i,f,h,v,w,k,y,_,C,N,M,H,L,E,T,I,A,B,V,D,z,R,j,S,O,Z,P,G,W,X,q,Q,ee,te,ne,le,se,re,oe,ie,ae,ce,ue,de,fe,pe,he,ge;return r=new yt({props:{setClass:e[3],klass:e[1]}}),R=new Xe({}),Z=new Ye({props:{setLink:e[2],href:e[4],blank:e[5]}}),Z.$on("close",e[8]),X=new Ge({props:{setClass:e[2],klass:e[0]}}),ee=new Ge({props:{txt:"bg",setClass:e[2],klass:e[0]}}),le=new Qe({}),oe=new Kt({props:{e_classes:e[6]}}),oe.$on("select",e[21]),ce=new xn({props:{mp:"m",title:"Margin",g_classes:e[1]}}),ce.$on("select",e[22]),fe=new xt({props:{setClass:e[3],klass:e[1]}}),{c(){t=p("div"),n=p("div"),l=p("div"),K(r.$$.fragment),o=m(),i=p("div"),f=g("B"),v=m(),w=p("div"),k=g("i"),_=m(),C=p("div"),N=g("U"),H=m(),L=p("div"),E=g("S"),I=m(),A=p("div"),B=g("P"),D=m(),z=p("div"),K(R.$$.fragment),S=m(),O=p("div"),K(Z.$$.fragment),G=m(),W=p("div"),K(X.$$.fragment),q=m(),Q=p("div"),K(ee.$$.fragment),te=m(),ne=p("div"),K(le.$$.fragment),re=m(),K(oe.$$.fragment),ie=m(),ae=p("div"),K(ce.$$.fragment),ue=m(),de=p("div"),K(fe.$$.fragment),b(l,"class","border-r"),b(i,"class",h="px-2 cursor-pointer select-none "+(e[6].bold?"text-blue-600":"")+" font-medium hover:bg-gray-200 py-1"),b(w,"class",y="px-3 cursor-pointer select-none "+(e[6].italic?"text-blue-600":"")+" italic hover:bg-gray-200 py-1"),b(C,"class",M="px-2 cursor-pointer select-none "+(e[6].underline?"text-blue-600":"")+" underline hover:bg-gray-200 py-1"),b(L,"class",T="px-2 cursor-pointer select-none "+(e[6].linethrough?"text-blue-600":"")+" line-through hover:bg-gray-200 py-1"),b(A,"class",V="px-2 cursor-pointer select-none "+(e[6].padding?"text-blue-600":"")+" font-medium hover:bg-gray-200 py-1"),b(z,"class",j="px-2 cursor-pointer select-none "+(e[6].code?"text-blue-600":"")+" line-through hover:bg-gray-200 py-2"),b(O,"class",P=(e[6].link?"text-blue-600":"")+" cursor-pointer select-none hover:bg-gray-200 text-sm border-r"),b(W,"class","pl-1 cursor-pointer select-none hover:bg-gray-200 py-1 "),b(Q,"class","px-1 cursor-pointer select-none hover:bg-gray-200 border-r h-full flex items-center"),b(ne,"class",se="px-2 "+(e[6].justify?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"),b(ae,"class","h-full"),b(de,"class","cursor-pointer select-none hover:bg-gray-200 h-full flex items-center border-l"),b(n,"class","rounded flex items-center shadow-lg border border-gray-200 text-gray-700"),b(t,"class","flex fixed font-normal -mt-6 shadow bg-white z-50 z-950 text-base rounded")},m(s,d){u(s,t,d),c(t,n),c(n,l),Y(r,l,null),c(n,o),c(n,i),c(i,f),c(n,v),c(n,w),c(w,k),c(n,_),c(n,C),c(C,N),c(n,H),c(n,L),c(L,E),c(n,I),c(n,A),c(A,B),c(n,D),c(n,z),Y(R,z,null),c(n,S),c(n,O),Y(Z,O,null),c(n,G),c(n,W),Y(X,W,null),c(n,q),c(n,Q),Y(ee,Q,null),c(n,te),c(n,ne),Y(le,ne,null),c(n,re),Y(oe,n,null),c(n,ie),c(n,ae),Y(ce,ae,null),c(n,ue),c(n,de),Y(fe,de,null),pe=!0,he||(ge=[x(i,"mousedown",e[10]),x(w,"mousedown",e[16]),x(C,"mousedown",e[17]),x(L,"mousedown",e[18]),x(A,"mousedown",e[11]),x(z,"mousedown",e[19]),x(ne,"mousedown",e[20]),a(e[7].call(null,t)),x(t,"mousedown",$(e[15]))],he=!0)},p(e,[t]){const n={};8&t&&(n.setClass=e[3]),2&t&&(n.klass=e[1]),r.$set(n),(!pe||64&t&&h!==(h="px-2 cursor-pointer select-none "+(e[6].bold?"text-blue-600":"")+" font-medium hover:bg-gray-200 py-1"))&&b(i,"class",h),(!pe||64&t&&y!==(y="px-3 cursor-pointer select-none "+(e[6].italic?"text-blue-600":"")+" italic hover:bg-gray-200 py-1"))&&b(w,"class",y),(!pe||64&t&&M!==(M="px-2 cursor-pointer select-none "+(e[6].underline?"text-blue-600":"")+" underline hover:bg-gray-200 py-1"))&&b(C,"class",M),(!pe||64&t&&T!==(T="px-2 cursor-pointer select-none "+(e[6].linethrough?"text-blue-600":"")+" line-through hover:bg-gray-200 py-1"))&&b(L,"class",T),(!pe||64&t&&V!==(V="px-2 cursor-pointer select-none "+(e[6].padding?"text-blue-600":"")+" font-medium hover:bg-gray-200 py-1"))&&b(A,"class",V),(!pe||64&t&&j!==(j="px-2 cursor-pointer select-none "+(e[6].code?"text-blue-600":"")+" line-through hover:bg-gray-200 py-2"))&&b(z,"class",j);const l={};4&t&&(l.setLink=e[2]),16&t&&(l.href=e[4]),32&t&&(l.blank=e[5]),Z.$set(l),(!pe||64&t&&P!==(P=(e[6].link?"text-blue-600":"")+" cursor-pointer select-none hover:bg-gray-200 text-sm border-r"))&&b(O,"class",P);const s={};4&t&&(s.setClass=e[2]),1&t&&(s.klass=e[0]),X.$set(s);const o={};4&t&&(o.setClass=e[2]),1&t&&(o.klass=e[0]),ee.$set(o),(!pe||64&t&&se!==(se="px-2 "+(e[6].justify?"text-blue-600":"text-gray-700")+" cursor-pointer select-none hover:bg-gray-200 py-1 h-full flex items-center"))&&b(ne,"class",se);const a={};64&t&&(a.e_classes=e[6]),oe.$set(a);const c={};2&t&&(c.g_classes=e[1]),ce.$set(c);const u={};8&t&&(u.setClass=e[3]),2&t&&(u.klass=e[1]),fe.$set(u)},i(e){pe||(U(r.$$.fragment,e),U(R.$$.fragment,e),U(Z.$$.fragment,e),U(X.$$.fragment,e),U(ee.$$.fragment,e),U(le.$$.fragment,e),U(oe.$$.fragment,e),U(ce.$$.fragment,e),U(fe.$$.fragment,e),pe=!0)},o(e){F(r.$$.fragment,e),F(R.$$.fragment,e),F(Z.$$.fragment,e),F(X.$$.fragment,e),F(ee.$$.fragment,e),F(le.$$.fragment,e),F(oe.$$.fragment,e),F(ce.$$.fragment,e),F(fe.$$.fragment,e),pe=!1},d(e){e&&d(t),J(r),J(R),J(Z),J(X),J(ee),J(le),J(oe),J(ce),J(fe),he=!1,s(ge)}}}const bn=/font\-(thin|normal|semibold|bold|black)/,vn=/p\-([0-4])/,wn=/^text\-(left|right|center)/,kn=/^p[lrtb]\-/,yn=/^m[lrtb]\-/;function _n(e,t,n){let l=n.split(" "),s=l.findIndex((e=>t.test(e))),r=~s?l[s]:"";return r&&(n=n.replace(r,"").trim()),n=n.split(" ").concat([e]).join(" ")}function Cn(e,t,n){let{setClass:l}=t,{setGClass:s}=t,{classes:r}=t,{g_classes:o}=t,{href:i}=t,{blank:a}=t,{base_node:c}=t,u=M(),{mouseX:d}=t;function f(e){return r.includes(e)}function p(e){return o.includes(e)}function h(e){return e.test(r)}let g={};function m(){n(6,g={bold:h(bn),padding:h(vn),italic:f(At),underline:f(Bt),linethrough:f(Vt),code:f(Dt),link:f(zt),justify:p(Ot),center:p(Rt),left:p(jt),right:p(St)})}function x(e){if(l(e),r.includes(e)){let t=r.split(" ");t.splice(t.indexOf(e),1),n(0,r=t.join(" "))}else n(0,r=r.split(" ").concat([e]).join(" "));m()}function $(e){if(s(e),wn.test(e))n(1,o=_n(e,wn,o));else if(kn.test(e)){let t=new RegExp(`^p${e[1]}`);n(1,o=_n(e,t,o))}else if(yn.test(e)){let t=new RegExp(`^m${e[1]}`);n(1,o=_n(e,t,o))}else if(o.includes(e)){let t=o.split(" ");t.splice(t.indexOf(e),1),n(1,o=t.join(" "))}else n(1,o=o.split(" ").concat([e]).join(" "));m()}m();return e.$$set=e=>{"setClass"in e&&n(2,l=e.setClass),"setGClass"in e&&n(3,s=e.setGClass),"classes"in e&&n(0,r=e.classes),"g_classes"in e&&n(1,o=e.g_classes),"href"in e&&n(4,i=e.href),"blank"in e&&n(5,a=e.blank),"base_node"in e&&n(14,c=e.base_node),"mouseX"in e&&n(13,d=e.mouseX)},[r,o,l,s,i,a,g,function(e){if(window.__edw.event,!c)return;let t="DIV"==c.parentNode.tagName?c:c.parentNode,l=t.parentNode.getBoundingClientRect(),s=l.top-10;if(t.previousElementSibling){let e=[...t.parentNode.childNodes],n=e.slice(0,e.indexOf(t)+1).reverse().find((e=>"BR"==e.tagName));n&&(l=n.getBoundingClientRect(),s=l.top?l.top:s)}let r={top:0,left:0},o=s-r.top;s<30&&(o=30),e.style.top=`${o}px`,n(13,d=d||10);let i=d-e.offsetWidth/2;i=i>0?i:10,i=d+e.offsetWidth/2<window.__edw.innerWidth?i:window.__edw.innerWidth-e.offsetWidth,e.style.left=i-r.left+"px"},function(){u("close")},x,function(){const e=["thin","normal","semibold","bold","black"];let t=!1;for(let s=0;s<e.length;s++)if(r.includes(e[s])){t=!0,s+1<e.length?(n(0,r=r.replace("font-"+e[s],"font-"+e[s+1]).trim()),l("font-"+e[s+1])):(n(0,r=r.replace("font-"+e[s],"font-"+e[0]).trim()),l("font-"+e[0]));break}t||(n(0,r=r.split(" ").concat(["font-bold"]).join(" ").trim()),l("font-bold")),m()},function(){const e=["0","1","2","3","4"];let t=!1;for(let s=0;s<e.length;s++)if(r.includes("p-"+e[s])){t=!0,s+1<e.length?(n(0,r=r.replace("p-"+e[s],"p-"+e[s+1]).trim()),l("p-"+e[s+1])):(n(0,r=r.replace("p-"+e[s],"p-"+e[0]).trim()),l("p-"+e[0]));break}t||(n(0,r=r.split(" ").concat(["p-1"]).join(" ").trim()),l("p-1")),m()},$,d,c,function(t){H.call(this,e,t)},()=>x(At),()=>x(Bt),()=>x(Vt),()=>x(Dt),()=>$(Ot),e=>$(e.detail),e=>$(e.detail)]}class Nn extends ee{constructor(e){super(),Q(this,e,Cn,$n,o,{setClass:2,setGClass:3,classes:0,g_classes:1,href:4,blank:5,base_node:14,mouseX:13})}}function Mn(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),b(l,"fill","currentColor"),b(l,"d","M9 7h6v6H9V7M3 3h18v2H3V3m0 12h18v2H3v-2m0 4h14v2H3v-2Z"),b(n,"viewBox","0 0 24 24"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",s="p-1 w-8 h-8 shrink-0 "+(t[0]?"bg-blue-200":"")+" cursor-pointer")},m(e,s){u(e,n,s),c(n,l),r||(o=x(n,"click",t[1]),r=!0)},p(e,[t]){1&t&&s!==(s="p-1 w-8 h-8 shrink-0 "+(e[0]?"bg-blue-200":"")+" cursor-pointer")&&b(n,"class",s)},i:e,o:e,d(e){e&&d(n),r=!1,o()}}}function Hn(e,t,n){let{selected:l=!1}=t;return e.$$set=e=>{"selected"in e&&n(0,l=e.selected)},[l,function(t){H.call(this,e,t)}]}class Ln extends ee{constructor(e){super(),Q(this,e,Hn,Mn,o,{selected:0})}}function En(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),b(l,"fill","currentColor"),b(l,"d","M3 7h6v6H3V7m0-4h18v2H3V3m18 4v2H11V7h10m0 4v2H11v-2h10M3 15h14v2H3v-2m0 4h18v2H3v-2Z"),b(n,"viewBox","0 0 24 24"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",s="w-8 shrink-0 h-8 p-1 "+(t[0]?"bg-blue-200":"")+" cursor-pointer")},m(e,s){u(e,n,s),c(n,l),r||(o=x(n,"click",t[1]),r=!0)},p(e,[t]){1&t&&s!==(s="w-8 shrink-0 h-8 p-1 "+(e[0]?"bg-blue-200":"")+" cursor-pointer")&&b(n,"class",s)},i:e,o:e,d(e){e&&d(n),r=!1,o()}}}function Tn(e,t,n){let{selected:l=!1}=t;return e.$$set=e=>{"selected"in e&&n(0,l=e.selected)},[l,function(t){H.call(this,e,t)}]}class In extends ee{constructor(e){super(),Q(this,e,Tn,En,o,{selected:0})}}function An(t){let n,l,s,r,o;return{c(){n=h("svg"),l=h("path"),b(l,"fill","currentColor"),b(l,"d","M15 7h6v6h-6V7M3 3h18v2H3V3m10 4v2H3V7h10m-4 4v2H3v-2h6m-6 4h14v2H3v-2m0 4h18v2H3v-2Z"),b(n,"viewBox","0 0 24 24"),b(n,"xmlns","http://www.w3.org/2000/svg"),b(n,"class",s="w-8 h-8 shrink-0 p-1 "+(t[0]?"bg-blue-200":"")+" cursor-pointer")},m(e,s){u(e,n,s),c(n,l),r||(o=x(n,"click",t[1]),r=!0)},p(e,[t]){1&t&&s!==(s="w-8 h-8 shrink-0 p-1 "+(e[0]?"bg-blue-200":"")+" cursor-pointer")&&b(n,"class",s)},i:e,o:e,d(e){e&&d(n),r=!1,o()}}}function Bn(e,t,n){let{selected:l=!1}=t;return e.$$set=e=>{"selected"in e&&n(0,l=e.selected)},[l,function(t){H.call(this,e,t)}]}class Vn extends ee{constructor(e){super(),Q(this,e,Bn,An,o,{selected:0})}}function Dn(e,t,n){const l=e.slice();return l[36]=t[n],l}function zn(e,t,n){const l=e.slice();return l[39]=t[n],l}function Rn(e){let t,n,l;return{c(){t=p("input"),b(t,"type","text"),b(t,"placeholder","Image src"),b(t,"class","bg-gray-100 text-sm font-mono mb-2 border p-1 w-64 rounded-sm outline-none shadow-inner")},m(s,r){u(s,t,r),w(t,e[1]),n||(l=x(t,"input",e[22]),n=!0)},p(e,n){2&n[0]&&t.value!==e[1]&&w(t,e[1])},d(e){e&&d(t),n=!1,l()}}}function jn(e){let t,n,l;return{c(){t=p("input"),b(t,"type","text"),b(t,"placeholder","Image alt"),b(t,"class","bg-gray-100 text-sm font-mono mb-2 border p-1 w-64 rounded-sm outline-none shadow-inner")},m(s,r){u(s,t,r),w(t,e[0]),n||(l=x(t,"input",e[23]),n=!0)},p(e,n){1&n[0]&&t.value!==e[0]&&w(t,e[0])},d(e){e&&d(t),n=!1,l()}}}function Sn(t){let n,l,s=t[39]+"";return{c(){n=p("option"),l=g(s),n.__value="w-"+t[39],n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function On(t){let n,l,s=t[36]+"";return{c(){n=p("option"),l=g(s),n.__value="h-"+t[36],n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&d(n)}}}function Zn(e){let t,n,l,r,o,i,a,f,h,$,v,w,k,y,_,C,N,M;return{c(){t=p("div"),n=p("label"),l=p("input"),r=g("\n                Autoplay"),o=m(),i=p("label"),a=p("input"),f=g("\n                Muted"),h=m(),$=p("label"),v=p("input"),w=g("\n                Loop"),k=m(),y=p("label"),_=p("input"),C=g("\n                Controls"),b(l,"class","mr-2"),b(l,"type","checkbox"),b(n,"class","flex items-center"),b(a,"class","mr-2"),b(a,"type","checkbox"),b(i,"class","flex items-center"),b(v,"class","mr-2"),b(v,"type","checkbox"),b($,"class","flex items-center"),b(_,"class","mr-2"),b(_,"type","checkbox"),b(y,"class","flex items-center"),b(t,"class","text-xs my-2")},m(s,d){u(s,t,d),c(t,n),c(n,l),l.checked=e[2].autoplay,c(n,r),c(t,o),c(t,i),c(i,a),a.checked=e[2].muted,c(i,f),c(t,h),c(t,$),c($,v),v.checked=e[2].loop,c($,w),c(t,k),c(t,y),c(y,_),_.checked=e[2].controls,c(y,C),N||(M=[x(l,"change",e[27]),x(a,"change",e[28]),x(v,"change",e[29]),x(_,"change",e[30])],N=!0)},p(e,t){4&t[0]&&(l.checked=e[2].autoplay),4&t[0]&&(a.checked=e[2].muted),4&t[0]&&(v.checked=e[2].loop),4&t[0]&&(_.checked=e[2].controls)},d(e){e&&d(t),N=!1,s(M)}}}function Pn(e){let t,n,l,o,i,h,g,v,w,y,_,C,N,M,H,L,E,T,I,A,B,V,D,R,j,S,O,Z,P,G,W,X,q,Q,ee,te=e[1]&&Rn(e),ne="IMG"==e[5]&&jn(e);h=new In({props:{selected:"left"===e[8]}}),h.$on("click",e[11]),v=new Ln({props:{selected:"center"===e[8]}}),v.$on("click",e[12]),y=new Vn({props:{selected:"right"===e[8]}}),y.$on("click",e[13]),N=new xn({props:{mp:"m",title:"Margin",g_classes:e[3]}}),N.$on("select",e[24]);let le=Pt,se=[];for(let t=0;t<le.length;t+=1)se[t]=Sn(zn(e,le,t));let re=Pt,oe=[];for(let t=0;t<re.length;t+=1)oe[t]=On(Dn(e,re,t));let ie="VIDEO"==e[5]&&Zn(e);return{c(){t=p("div"),te&&te.c(),n=m(),ne&&ne.c(),l=m(),o=p("div"),i=p("div"),K(h.$$.fragment),g=m(),K(v.$$.fragment),w=m(),K(y.$$.fragment),_=m(),C=p("div"),K(N.$$.fragment),M=m(),H=p("div"),L=p("div"),E=p("div"),E.textContent="Width:",T=m(),I=p("select");for(let e=0;e<se.length;e+=1)se[e].c();A=m(),B=p("div"),V=p("div"),V.textContent="Height:",D=m(),R=p("select");for(let e=0;e<oe.length;e+=1)oe[e].c();j=m(),ie&&ie.c(),S=m(),O=p("div"),Z=p("button"),Z.textContent="Cancel",P=m(),G=p("button"),G.textContent="Delete",W=m(),X=p("button"),X.textContent="Update",b(C,"class","h-full"),b(i,"class","flex shrink-0"),b(E,"class","w-10"),b(I,"class","focus:outline-none border"),void 0===e[6]&&z((()=>e[25].call(I))),b(L,"class","flex items-center space-x-1 text-xs"),b(V,"class","w-10"),b(R,"class","focus:outline-none border"),void 0===e[7]&&z((()=>e[26].call(R))),b(B,"class","flex items-center space-x-1 mt-1 text-xs"),b(o,"class","my-2 flex justify-between items-center"),b(Z,"class","hover:bg-gray-300 px-3 rounded-sm outline-none text-xs py-1"),b(G,"class","hover:bg-red-700 px-3 rounded-sm outline-none mx-2 bg-red-600 text-red-100 text-xs py-1"),b(X,"class","ml-2 hover:bg-blue-700 bg-blue-600 text-blue-100 px-3 rounded-sm outline-none text-xs py-1"),b(O,"class","flex items-center justify-end mt-2"),b(t,"class","absolute -mt-6 p-3 shadow-xl flex flex-col rounded text-black bg-white z-940 z-40")},m(s,d){u(s,t,d),te&&te.m(t,null),c(t,n),ne&&ne.m(t,null),c(t,l),c(t,o),c(o,i),Y(h,i,null),c(i,g),Y(v,i,null),c(i,w),Y(y,i,null),c(i,_),c(i,C),Y(N,C,null),c(o,M),c(o,H),c(H,L),c(L,E),c(L,T),c(L,I);for(let e=0;e<se.length;e+=1)se[e].m(I,null);k(I,e[6]),c(H,A),c(H,B),c(B,V),c(B,D),c(B,R);for(let e=0;e<oe.length;e+=1)oe[e].m(R,null);k(R,e[7]),c(t,j),ie&&ie.m(t,null),c(t,S),c(t,O),c(O,Z),c(O,P),c(O,G),c(O,W),c(O,X),q=!0,Q||(ee=[x(I,"change",e[25]),x(I,"change",e[9]),x(I,"blur",e[9]),x(R,"change",e[26]),x(R,"change",e[9]),x(R,"blur",e[9]),x(Z,"click",e[15]),x(G,"click",(function(){r(e[4])&&e[4].apply(this,arguments)})),x(X,"click",e[31]),x(t,"mousedown",$(e[21])),a(e[16].call(null,t))],Q=!0)},p(s,r){(e=s)[1]?te?te.p(e,r):(te=Rn(e),te.c(),te.m(t,n)):te&&(te.d(1),te=null),"IMG"==e[5]?ne?ne.p(e,r):(ne=jn(e),ne.c(),ne.m(t,l)):ne&&(ne.d(1),ne=null);const o={};256&r[0]&&(o.selected="left"===e[8]),h.$set(o);const i={};256&r[0]&&(i.selected="center"===e[8]),v.$set(i);const a={};256&r[0]&&(a.selected="right"===e[8]),y.$set(a);const c={};if(8&r[0]&&(c.g_classes=e[3]),N.$set(c),0&r){let t;for(le=Pt,t=0;t<le.length;t+=1){const n=zn(e,le,t);se[t]?se[t].p(n,r):(se[t]=Sn(n),se[t].c(),se[t].m(I,null))}for(;t<se.length;t+=1)se[t].d(1);se.length=le.length}if(64&r[0]&&k(I,e[6]),0&r){let t;for(re=Pt,t=0;t<re.length;t+=1){const n=Dn(e,re,t);oe[t]?oe[t].p(n,r):(oe[t]=On(n),oe[t].c(),oe[t].m(R,null))}for(;t<oe.length;t+=1)oe[t].d(1);oe.length=re.length}128&r[0]&&k(R,e[7]),"VIDEO"==e[5]?ie?ie.p(e,r):(ie=Zn(e),ie.c(),ie.m(t,S)):ie&&(ie.d(1),ie=null)},i(e){q||(U(h.$$.fragment,e),U(v.$$.fragment,e),U(y.$$.fragment,e),U(N.$$.fragment,e),q=!0)},o(e){F(h.$$.fragment,e),F(v.$$.fragment,e),F(y.$$.fragment,e),F(N.$$.fragment,e),q=!1},d(e){e&&d(t),te&&te.d(),ne&&ne.d(),J(h),J(v),J(y),J(N),f(se,e),f(oe,e),ie&&ie.d(),Q=!1,s(ee)}}}function Gn(e,t,n){let{alt:l}=t,{src:s}=t,{opts:r}=t,{klass:o=""}=t,{setMedia:i}=t,{delMedia:a}=t,{cancel:c}=t,{media_type:u}=t,d=o.match(/w-\d+/),f=o.match(/h-\d+/),p=d?.[0]??"w-auto",h=f?.[0]??"h-auto",g=o.includes("justify-end")?"right":o.includes("flex justify-center")?"center":o.includes("flex")?"left":"",m="left"===g?"flex items-start":"right"===g?"flex justify-end items-start":"center"===g?"flex justify-center items-start":"",x=o.replace(/(flex.+start|w-[\w\.]+)/g,"");function $(){n(3,o=`${m} ${h} ${p} ${x}`),v(!0)}function b(e){const t=new RegExp(e.split("-")[0]+"-\\w+");x=x.replace(t,""),x+=" "+e,$()}async function v(e=!1){let t=await te.testImgUrl(s.trim()),n=te.testVideoUrl(s.trim()),a=te.parseYouTube(s.trim())||te.parseVimeo(s.trim());(t||n||a)&&i({src:a||s,klass:o,alt:l,opts:r,media_type:t?"IMG":n?"VIDEO":a?"IFRAME":"AUDIO"},e)}let{mouseX:w}=t,{base_node:k}=t;return e.$$set=e=>{"alt"in e&&n(0,l=e.alt),"src"in e&&n(1,s=e.src),"opts"in e&&n(2,r=e.opts),"klass"in e&&n(3,o=e.klass),"setMedia"in e&&n(18,i=e.setMedia),"delMedia"in e&&n(4,a=e.delMedia),"cancel"in e&&n(19,c=e.cancel),"media_type"in e&&n(5,u=e.media_type),"mouseX"in e&&n(17,w=e.mouseX),"base_node"in e&&n(20,k=e.base_node)},[l,s,r,o,a,u,p,h,g,$,b,function(){"left"===g?(n(8,g=""),m=""):(m="flex items-start",n(8,g="left")),$()},function(){"center"===g?(n(8,g=""),m=""):(m="flex justify-center items-start",n(8,g="center")),$()},function(){"right"===g?(n(8,g=""),m=""):(m="flex justify-end items-start",n(8,g="right")),$()},v,function(){c()},function(e){if(window.__edw.event,!k)return;let t="DIV"==k.parentNode.tagName?k:k.parentNode,l=t.parentNode.getBoundingClientRect(),s=l.top;if(t.previousElementSibling){let e=[...t.parentNode.childNodes],n=e.slice(0,e.indexOf(t)+1).reverse().find((e=>"BR"==e.tagName));n&&(l=n.getBoundingClientRect(),s=l.top?l.top:s)}let r=function(e){for(;e.parentNode&&e.parentNode.tagName;)if(e=e.parentNode,"relative"==window.getComputedStyle(e).getPropertyValue("position").toLowerCase())return e.getBoundingClientRect();return{top:-window.__edw.scrollY,left:0}}(e),o=s-r.top;s<30&&(o=30),e.style.top=`${o}px`,n(17,w=w||10);let i=w-e.offsetWidth/2;i=i>0?i:10,i=w+e.offsetWidth/2<window.__edw.innerWidth?i:window.__edw.innerWidth-e.offsetWidth,e.style.left=i-r.left+"px"},w,i,c,k,function(t){H.call(this,e,t)},function(){s=this.value,n(1,s)},function(){l=this.value,n(0,l)},e=>b(e.detail),function(){p=y(this),n(6,p)},function(){h=y(this),n(7,h)},function(){r.autoplay=this.checked,n(2,r)},function(){r.muted=this.checked,n(2,r)},function(){r.loop=this.checked,n(2,r)},function(){r.controls=this.checked,n(2,r)},()=>v()]}class Wn extends ee{constructor(e){super(),Q(this,e,Gn,Pn,o,{alt:0,src:1,opts:2,klass:3,setMedia:18,delMedia:4,cancel:19,media_type:5,mouseX:17,base_node:20},null,[-1,-1])}}function Xn(e){return JSON.parse(JSON.stringify(e))}var Un={arr:[],i:-1,add(e){this.arr[++this.i]=Xn(e)},update(e){this.arr[this.i]=Xn(e)},prev(){return 0==this.i?Xn(this.arr[0]):Xn(this.arr[--this.i])},next(){return this.i>=this.arr.length-1?Xn(this.arr[this.arr.length-1]):Xn(this.arr[++this.i])}};function Fn(e,t,n){const l=e.slice();return l[46]=t[n],l[47]=t,l[48]=n,l}function qn(e){let t,n;return t=new Nn({props:{setGClass:e[4],setClass:e[3],base_node:e[5],g_classes:e[7],classes:e[6],href:e[8],blank:e[9],mouseX:e[10]}}),t.$on("close",e[16]),{c(){K(t.$$.fragment)},m(e,l){Y(t,e,l),n=!0},p(e,n){const l={};16&n[0]&&(l.setGClass=e[4]),8&n[0]&&(l.setClass=e[3]),32&n[0]&&(l.base_node=e[5]),128&n[0]&&(l.g_classes=e[7]),64&n[0]&&(l.classes=e[6]),256&n[0]&&(l.href=e[8]),512&n[0]&&(l.blank=e[9]),1024&n[0]&&(l.mouseX=e[10]),t.$set(l)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Kn(e){let n,l;const s=[{setMedia:e[20]},{delMedia:e[21]},{cancel:e[30]},{base_node:e[5]},e[12],{mouseX:e[10]}];let r={};for(let e=0;e<s.length;e+=1)r=t(r,s[e]);return n=new Wn({props:r}),{c(){K(n.$$.fragment)},m(e,t){Y(n,e,t),l=!0},p(e,t){const l=3152928&t[0]?function(e,t){const n={},l={},s={$$scope:1};let r=e.length;for(;r--;){const o=e[r],i=t[r];if(i){for(const e in o)e in i||(l[e]=1);for(const e in i)s[e]||(n[e]=i[e],s[e]=1);e[r]=i}else for(const e in o)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(s,[1048576&t[0]&&{setMedia:e[20]},2097152&t[0]&&{delMedia:e[21]},2048&t[0]&&{cancel:e[30]},32&t[0]&&{base_node:e[5]},4096&t[0]&&(r=e[12],"object"==typeof r&&null!==r?r:{}),1024&t[0]&&{mouseX:e[10]}]):{};var r;n.$set(l)},i(e){l||(U(n.$$.fragment,e),l=!0)},o(e){F(n.$$.fragment,e),l=!1},d(e){J(n,e)}}}function Yn(e){let t,n,l,s;function r(t){e[31](t,e[46])}function o(t){e[32](t,e[46])}let i={editable:e[1],custom:!!e[46].custom};return void 0!==e[46].html&&(i.html=e[46].html),void 0!==e[46].klass&&(i.gklass=e[46].klass),t=new Le({props:i}),E.push((()=>q(t,"html",r,e[46].html))),E.push((()=>q(t,"gklass",o,e[46].klass))),t.$on("back",e[25]),t.$on("forward",e[26]),t.$on("enter",(function(...t){return e[33](e[48],...t)})),t.$on("merge_prev",(function(...t){return e[34](e[48],...t)})),t.$on("merge_next",(function(...t){return e[35](e[48],...t)})),t.$on("select",e[15]),t.$on("hideselect",e[16]),t.$on("set_media",e[19]),t.$on("input",e[22]),t.$on("changeClass",e[24]),t.$on("blur",e[23]),t.$on("update",e[23]),t.$on("pasteTxt",(function(...t){return e[36](e[48],...t)})),{c(){K(t.$$.fragment)},m(e,n){Y(t,e,n),s=!0},p(s,r){e=s;const o={};2&r[0]&&(o.editable=e[1]),1&r[0]&&(o.custom=!!e[46].custom),!n&&1&r[0]&&(n=!0,o.html=e[46].html,R((()=>n=!1))),!l&&1&r[0]&&(l=!0,o.gklass=e[46].klass,R((()=>l=!1))),t.$set(o)},i(e){s||(U(t.$$.fragment,e),s=!0)},o(e){F(t.$$.fragment,e),s=!1},d(e){J(t,e)}}}function Jn(e){let t,n,l,s,r,o,i=e[2]&&e[1]&&qn(e),c=e[11]&&e[1]&&Kn(e),h=e[0],g=[];for(let t=0;t<h.length;t+=1)g[t]=Yn(Fn(e,h,t));const x=e=>F(g[e],1,1,(()=>{g[e]=null}));return{c(){i&&i.c(),t=m(),c&&c.c(),n=m(),l=p("div");for(let e=0;e<g.length;e+=1)g[e].c();b(l,"key","ed")},m(d,f){i&&i.m(d,f),u(d,t,f),c&&c.m(d,f),u(d,n,f),u(d,l,f);for(let e=0;e<g.length;e+=1)g[e].m(l,null);s=!0,r||(o=a(e[14].call(null,l)),r=!0)},p(e,s){if(e[2]&&e[1]?i?(i.p(e,s),6&s[0]&&U(i,1)):(i=qn(e),i.c(),U(i,1),i.m(t.parentNode,t)):i&&(W(),F(i,1,1,(()=>{i=null})),X()),e[11]&&e[1]?c?(c.p(e,s),2050&s[0]&&U(c,1)):(c=Kn(e),c.c(),U(c,1),c.m(n.parentNode,n)):c&&(W(),F(c,1,1,(()=>{c=null})),X()),265265155&s[0]){let t;for(h=e[0],t=0;t<h.length;t+=1){const n=Fn(e,h,t);g[t]?(g[t].p(n,s),U(g[t],1)):(g[t]=Yn(n),g[t].c(),U(g[t],1),g[t].m(l,null))}for(W(),t=h.length;t<g.length;t+=1)x(t);X()}},i(e){if(!s){U(i),U(c);for(let e=0;e<h.length;e+=1)U(g[e]);s=!0}},o(e){F(i),F(c),g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)F(g[e]);s=!1},d(e){i&&i.d(e),e&&d(t),c&&c.d(e),e&&d(n),e&&d(l),f(g,e),r=!1,o()}}}function Qn(e,t,n){const l=M();let{arr_html:s=[{html:"",klass:"p-2"}]}=t,{editable:r=!1}=t,{html:o=""}=t,{uid:i=null}=t;async function a(e,t){let l=t.detail.target,r=[...l.parentNode.children].indexOf(l),o=t.detail.klass?.trim(),i=t.detail.klass?.trim();t.detail.html||(o=""),t.detail.next_html||(i=""),s.splice(e,1,{html:t.detail.html,klass:o,custom:s[e].custom},{html:t.detail.next_html,klass:i}),n(0,s),await new Promise((e=>setTimeout(e)));let a=[...l.parentNode.children],u=1;for(;a[r+u]&&!a[r+u].getAttribute("contenteditable");)u++;a[r+u]?.focus(),c()}function c(){setTimeout((()=>{Un.add(s)})),L()}Un.add(s);let u,d,f,p,h,g,m,x,$,b,v=!1;function w(){n(2,v=!1)}function k(e,t){if(t>0&&!s[t-1].custom){let l=s[t-1],r=s[t];l.html?l.html+=e.detail:n(0,s[t-1]={...r},s),s.splice(t,1),n(0,s[t-1].custom=!1,s),n(0,s)}c()}function y(e,t){if(t+1<s.length&&!s[t+1].custom){let e=s[t],l=s[t+1];e.html?e.html+=l.html:n(0,s[t]={...l},s),s.splice(t+1,1),n(0,s[t].custom=!1,s),n(0,s)}c()}let _=!1,C={};let N=!1;function H(){N&&!v&&(L(),Un.add(s),N=!1)}function L(){setTimeout((()=>{l("change",{uid:i,arr_html:s})}))}const E=["SPAN","EM","STRONG","SMALL","H1","H2","H3","H4","H5","H6","P"];async function T(e,t){await new Promise((e=>setTimeout(e)));let l=t.detail.children;if(l){let t=[];for(let e of[...l])if(e.dataset?.uid?.startsWith("0x")){e=e.children[0];for(let n of[...e.children])t.push({html:n.innerHTML,klass:n?.getAttribute("class")||""})}else e.dataset.txteditor?t.push({html:e.innerHTML,klass:e.getAttribute("class")}):e.children.length||t.push({html:e.innerText,klass:""});t.length?e<s.length?n(0,s=s.slice(0,e).concat(t).concat(s.slice(e+1,s.length))):n(0,s=s.slice(0,e).concat(t)):(l.length&&n(0,s[e].custom=!0,s),E.includes(l?.[0]?.tagName)&&n(0,s[e].html=`<div>${l[0].innerHTML}</div>`,s),n(0,s)),c()}}window.__edw.addEventListener("mousedown",(function(e){n(11,_=!1);let t=function(e){for(;!e.dataset.editor&&e.parentNode&&e.parentNode.tagName;)e=e.parentNode;return!!e.dataset.editor&&e}(e.target);t&&t.dataset.uid===i||(H(),w())}));return e.$$set=e=>{"arr_html"in e&&n(0,s=e.arr_html),"editable"in e&&n(1,r=e.editable),"html"in e&&n(28,o=e.html),"uid"in e&&n(29,i=e.uid)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(28,o=s.map((e=>`<div class='${e.klass}'>${e.html}</div>`)).join("\n"))},[s,r,v,u,d,f,p,h,g,m,x,_,C,a,function(e){},function(e){n(5,f=e.detail.base_node),f&&"DIV"!=f.tagName&&(n(2,v=!0),n(3,u=e.detail.setClass),n(4,d=e.detail.setGClass),n(6,p=e.detail.classes),n(7,h=e.detail.g_classes),n(8,g=e.detail.href),n(9,m=e.detail.blank),n(10,x=e.detail.mouseX))},w,k,y,function(e){$=e.detail.setMedia,b=e.detail.delMedia,n(5,f=e.detail.base_node),n(12,C={alt:e.detail.alt||"",src:e.detail.src||"",opts:e.detail.opts||{},klass:e.detail.klass||"",media_type:e.detail.media_type}),n(10,x=e.detail.mouseX),$(C),n(11,_=!0)},function(e,t=!1){$(e),t||n(11,_=!1),L()},function(){b(),n(11,_=!1),L()},function(e){e?.detail?.currentTarget&&(e.detail.currentTarget.innerText?Un.update(s):Un.add(s)),N=!0},H,function(){c()},function(){n(0,s=Un.prev())},function(){n(0,s=Un.next())},T,o,i,()=>n(11,_=!1),function(t,l){e.$$.not_equal(l.html,t)&&(l.html=t,n(0,s))},function(t,l){e.$$.not_equal(l.klass,t)&&(l.klass=t,n(0,s))},(e,t)=>a(e,t),(e,t)=>k(t,e),(e,t)=>y(0,e),(e,t)=>T(e,t)]}return window.__edw||=window,class extends ee{constructor(e){super(),Q(this,e,Qn,Jn,o,{arr_html:0,editable:1,html:28,uid:29},null,[-1,-1])}}}));
